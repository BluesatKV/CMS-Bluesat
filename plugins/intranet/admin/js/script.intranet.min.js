function openDialog(t){t.preventDefault(),thisDataDialog=$(this).attr("data-dialog");var e=$(this).parents(":eq(4)").attr("id");return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_dialog_img.php",type:"POST",datatype:"html",data:{imageID:e},beforeSend:function(){$("#itemDetails .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(t){setTimeout(function(){$("#itemDetails .dialog__overview").hide().html(t).fadeIn(900),$("#info1 .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),$("#editdesc").click(editDesc),$("#closedesc").click(closeDesc),$("#savedesc").click(saveDesc),$("#editcat").click(editCat),$("#closecat").click(closeCat),$("#savecat").click(saveCat)},1e3)},error:function(){}}),dialogEl=document.getElementById(thisDataDialog),dlg=new DialogFx(dialogEl,{onOpenDialog:function(t){console.log("OPEN")},onCloseDialog:function(t){console.log("CLOSE")}}),dlg.toggle(dlg),!1}function openDialogEditTask(t){t.preventDefault(),thisDataDialog=$(this).attr("data-dialog");var e=$(this).attr("data-id");return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_dialog_task.php",type:"POST",datatype:"html",data:{taskID:e},beforeSend:function(){$("#taskDialogEdit .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(t){setTimeout(function(){$("#taskDialogEdit .dialog__overview").hide().html(t).fadeIn(900),tinymce.remove("#editTaskEditor"),initializeTinyMce("#editTaskEditor",300),$("#taskDialogEdit .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("input[name=envo_edittasktime]"),initializeDateTimePicker("input[name=envo_edittaskreminder]")},1e3)},error:function(){},complete:function(){}}),dialogEl=document.getElementById(thisDataDialog),dlg=new DialogFx(dialogEl,{onOpenDialog:function(t){console.log("OPEN")},onCloseDialog:function(t){console.log("CLOSE")}}),dlg.toggle(dlg),!1}function deleteImg(t){t.preventDefault();var e=$(this).attr("data-id");return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_delete_img.php",type:"POST",datatype:"json",data:{imageID:e},success:function(t){"delete_success"==t.status?($("#gallery_envo").isotope("remove",$("#"+t.data[0].id)).isotope("layout"),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3)},complete:function(){},error:function(){}}),!1}function deleteTask(t){return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_delete_task.php",type:"POST",datatype:"json",data:{taskID:t},success:function(t){"delete_success"==t.status?($("#task_"+t.data[0].id).remove(),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3)},complete:function(){},error:function(){}}),!1}function confirmDeleteTask(t){t.preventDefault();var e=$(this).attr("data-id");return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-deltask"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(t){1==t&&(console.log(e),deleteTask(e)),console.log("Bootbox confirm dialog: "+t)}}),!1}function editDesc(t){return t.preventDefault(),$("#desc").attr("readonly",!1),$("#shortdesc").attr("readonly",!1),$(this).hide(),$("#savedesc").show(),$("#closedesc").show(),!1}function saveDesc(t){t.preventDefault();var e=$(this).attr("data-id"),a=$("#desc").val(),i=$("#shortdesc").val();return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_update_img.php",type:"POST",datatype:"json",data:{imageID:e,descImage:a,shortdescImage:i},success:function(t){"update_success"==t.status&&($("#timeedit").html(t.data[0].timeedit),$("#desc").attr("readonly",!0),$("#shortdesc").attr("readonly",!0),$("#savedesc").hide(),$("#closedesc").hide(),$("#editdesc").show(),$("#"+t.data[0].id+".gallery-item-"+t.data[0].id).find(".shortdesc").text(t.data[0].shortdescription),$("#notificationcontainer").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show())},error:function(){}}),!1}function closeDesc(t){return t.preventDefault(),$("#desc").attr("readonly",!0),$("#shortdesc").attr("readonly",!0),$(this).hide(),$("#savedesc").hide(),$("#editdesc").show(),!1}function editCat(t){return t.preventDefault(),$("#info1 .selectpicker").attr("disabled",!1),$(this).hide(),$("#savecat").show(),$("#closecat").show(),!1}function saveCat(t){t.preventDefault();var e=$(this).attr("data-id"),a=$('select[name="envo_imgcategory_dialog"]').val();return $.ajax({url:"/plugins/intranet/admin/ajax/int_table_update_img_cat.php",type:"POST",datatype:"json",data:{imageID:e,catImage:a},success:function(t){if("update_success"==t.status){$("#timeedit").html(t.data[0].timeedit),$("#info1 .selectpicker").attr("disabled",!0),$("#savecat").hide(),$("#closecat").hide(),$("#editcat").show();var e=$("#"+t.data[0].id).attr("class").split(" ")[0];$("#"+t.data[0].id+"."+e).removeClass().addClass(e+" "+t.data[0].category),$("#notificationcontainer").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()}},error:function(){}}),!1}function closeCat(t){return t.preventDefault(),$("#info1 .selectpicker").attr("disabled",!0),$(this).hide(),$("#savecat").hide(),$("#editcat").show(),!1}function addRowCont(){var t=pageID,e=$('input[name="addRowCont"]'),a=e.val();a.length>0?($.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_addnew_cont.php",datatype:"json",data:{houseID:t,contact:a},success:function(t){if("success"==t.status){var e=JSON.stringify(t),a=JSON.parse(e),i="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){i+="<tr><td>"+e.id+"</td><td>"+e.name+"</td><td>"+e.address+"</td><td>"+e.phone+"</td><td>"+e.email+"</td><td>"+e.commission+"</td></tr>"})}),$("#tablecontacts tbody").html(i),$("#tablecontacts").Tabledit("update"),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)}else setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(){}}),e.parent().removeClass("has-error")):(setTimeout(function(){$.notify({message:"Před vložením nového kontaktu zadejte celé jméno"},{type:"danger",delay:5e3})},1e3),e.parent().addClass("has-error"))}function addRowEnt(){var t=pageID,e=$('input[name="addRowEnt"]'),a=e.val();a.length&&$.isNumeric(a)?($.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_addnew.php",datatype:"json",data:{houseID:t,entrance:a},success:function(t){if("success"==t.status){var e=JSON.stringify(t),a=JSON.parse(e),i="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){i+="<tr><td>"+e.id+"</td><td>"+e.entrance+"</td><td>"+e.countapartment+"</td><td>"+e.countetage+"</td><td>"+e.elevator+"</td></tr>"})}),$("#tableentrance tbody").html(i),$("#tableentrance").Tabledit("update"),setTimeout(function(){$.notify({message:t.status_msg+", stránka bude obnovena"},{type:"success",delay:2e3})},1e3),setInterval(function(){location.reload(!0)},5e3)}else setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(){}}),e.parent().removeClass("has-error")):(setTimeout(function(){$.notify({message:"Před vložením nového řádku zadejte číslo vchodu. <br>Zkontrolujte zda-li číslo vchodu je celé číslo (0-9)."},{type:"danger",delay:5e3})},1e3),e.parent().addClass("has-error"))}function addRowApt(){var t=pageID,e=$(this).attr("data-entrance");$.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_addnew_apt.php",datatype:"html",data:{houseID:t,entrance:e},success:function(t){$("#tableapartment_"+e+" tbody").html(t),$("#tableapartment_"+e).Tabledit("update")},error:function(){}})}function addRowServ(){var t=pageID;$.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_addnew_serv.php",datatype:"json",data:{houseID:t},success:function(t){if("success"==t.status){var e=JSON.stringify(t),a=JSON.parse(e),i="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){i+='<tr class="success"><td>'+e.id+"</td><td>"+e.description+"</td><td>"+e.timedefault+"</td><td>"+e.timestart+"</td><td>"+e.timeend+"</td></tr>"})}),$("#tableservice tbody tr").removeClass("success"),$("#tableservice tbody").prepend(i),$("#tableservice").Tabledit("update"),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)}else setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(){}})}function clickTaskHeader(){$header=$(this),$text=$header.children("span.collapsetask"),$content=$header.next().next(),$content.slideToggle(500,function(){$text.text(function(){return $content.is(":visible")?"-":"+"})})}function initializeTinyMce(t,e){void 0==t&&(t="textarea"),tinymce.init({selector:t,theme:"modern",width:"100%",height:e,language:envoWeb.envo_lang,entity_encoding:"raw",plugins:["advlist autolink link charmap hr insertdatetime textcolor responsivefilemanager","searchreplace visualblocks paste","table"],paste_as_text:!0,menubar:"edit insert view format table",toolbar:"undo redo | bold italic | alignleft aligncenter alignjustify | bullist numlist | forecolor backcolor",statusbar:!1,valid_elements:"*[*]",insertdatetime_formats:["%H:%M:%S","%Y-%m-%d","%d.%m.%Y","%I:%M:%S %p","%D"],external_filemanager_path:"/assets/plugins/tinymce/plugins/filemanager/",filemanager_title:"Filemanager",external_plugins:{filemanager:"plugins/filemanager/plugin.min.js"}})}function initializeDateTimePicker(t){$(t).datetimepicker({locale:envoWeb.envo_lang,format:"DD.MM.YYYY",icons:$.AdminEnvo.DateTimepicker.icons(),tooltips:$.AdminEnvo.DateTimepicker.tooltips(),showTodayButton:!0,showClear:!0,calendarWeeks:!0,ignoreReadonly:!0})}if($wrapLimitRange={min:aceEditor.acewraplimit,max:aceEditor.acewraplimit},$("#htmleditor").length){var htmlACE=ace.edit("htmleditor");htmlACE.setTheme("ace/theme/"+aceEditor.acetheme),htmlACE.session.setUseWrapMode(!0),htmlACE.session.setWrapLimitRange($wrapLimitRange.min,$wrapLimitRange.max),htmlACE.setOptions({mode:"ace/mode/html",tabSize:aceEditor.acetabSize,useSoftTabs:!0,highlightActiveLine:aceEditor.aceactiveline,showInvisibles:aceEditor.aceinvisible,showGutter:aceEditor.acegutter}),htmlACE.$blockScrolling=1/0,texthtml=$("#envo_editor").val(),htmlACE.session.setValue(texthtml)}$(function(){$("form").submit(function(){$("#envo_editor").length&&$("#envo_editor").val(htmlACE.getValue())})}),$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0};var pageID=$.urlParam("id"),page=$.urlParam("p"),page1=$.urlParam("sp"),page2=$.urlParam("ssp");$(function(){null!=page2&&(tinymce.init({selector:"textarea.envoEditorLarge",theme:"modern",width:"100%",height:500,language:envoWeb.envo_lang,entity_encoding:"raw",menubar:"edit insert view format table tools",plugins:["advlist autolink link image lists charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons paste textcolor responsivefilemanager bootstrap "],bootstrapConfig:{type:"dropdownMenu",dropdownText:"Bootstrap Elements",bootstrapElements:{btn:!0,icon:!0,image:!0,table:!0,template:!0,breadcrumb:!0,pagination:!0,pager:!0,label:!0,badge:!0,alert:!0,panel:!0,snippet:!0}},toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link | preview | forecolor backcolor | bootstrap",statusbar:!1,image_advtab:!0,relative_urls:!1,convert_urls:!1,remove_script_host:!0,document_base_url:"/",valid_elements:"*[*]",insertdatetime_formats:["%H:%M:%S","%Y-%m-%d","%d.%m.%Y","%I:%M:%S %p","%D"],external_filemanager_path:"/assets/plugins/tinymce/plugins/filemanager/",filemanager_title:"Filemanager",external_plugins:{filemanager:"plugins/filemanager/plugin.min.js"}}),tinymce.init({selector:"textarea.envoEditorSmall",theme:"modern",width:"100%",height:300,language:envoWeb.envo_lang,entity_encoding:"raw",menubar:"edit insert view format table tools",plugins:["advlist autolink link image lists charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality paste textcolor "],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignjustify | bullist numlist | forecolor backcolor",statusbar:!1,image_advtab:!0,relative_urls:!1,convert_urls:!1,remove_script_host:!0,document_base_url:"/",valid_elements:"*[*]",insertdatetime_formats:["%H:%M:%S","%Y-%m-%d","%d.%m.%Y","%I:%M:%S %p","%D"]}))}),$(function(){var t,e,a=$("#gallery_envo");a.isotope({itemSelector:'div[class^="gallery-item-"]',masonry:{columnWidth:280,gutter:10,isFitWidth:!0},filter:function(){var a=$(this),i=!t||a.text().match(t),s=!e||a.is(e);return i&&s}}),$(".filters").on("click",".filter",function(t){t.preventDefault();$(this);e=$(this).attr("data-filter"),a.isotope()});var i=$("#quicksearch").keyup(function(t,e){var a;return function(){a&&clearTimeout(a),setTimeout(function(){t(),a=null},e||100)}}(function(){t=new RegExp(i.val(),"gi"),a.isotope()}));$(".filter").on("click",function(){$(".filters").find(".active").removeClass("active"),$(this).addClass("active")}),$('a[href="#cmsPage10"]').on("shown.bs.tab",function(t){a.isotope("layout")})}),$(function(){function t(t){return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" GB":t>=1e6?(t/1e6).toFixed(2)+" MB":(t/1e3).toFixed(2)+" KB"}$("#uploadBtnDocu").on("click",function(e){e.preventDefault(),$("#docuoutput").hide(),$("#docuprogress").show(),$("#docupercent").html("0%");var a=$("#fileinput_doc").prop("files")[0],i=$('input[name="folderpath"]').val(),s=new FormData;s.append("file",a),s.append("folderpath",i),s.append("houseID",pageID),$.ajax({url:"/plugins/intranet/admin/ajax/int_table_upload_docu.php",type:"POST",data:s,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=e.loaded,i=e.total,s=(a/i*100).toFixed(2)+"%",n=t(a),o=t(i);$("#docuprogressbar").css("width",s),$("#docupercent").html(s),$("#docubyterec").html(n),$("#docubytetotal").html(o)}},!1),e},success:function(t){if("upload_success"==t.status){$("#docuoutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+t.status_msg+"</div>");var e=JSON.stringify(t),a=JSON.parse(e),i="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){i+="<tr><td>"+e.id+"</td><td>"+e.fileicon+"</td><td>"+e.description+'</td><td><a href="'+e.fullpath+'" target="_blank">Zobrazit</a> | <a href="'+e.fullpath+'" download>Stáhnout</a></td></tr>'})}),$("#tabledocu tbody").html(i),$("#tabledocu").Tabledit("update",{}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)}else-1!=t.status.indexOf("upload_error")&&($("#docuoutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+t.status+" => "+t.status_msg+"</div>"),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(){},complete:function(){$("#docuprogress").hide(),$("#docuprogressbar").css("width",""),$("#docuoutput").show()}})}),$("#uploadBtnImg").on("click",function(e){e.preventDefault(),$("#imgoutput").hide(),$("#imgprogress").show(),$("#imgpercent").html("0%");var a=$("#fileinput_img").prop("files")[0],i=$('input[name="folderpath"]').val(),s=$('select[name="envo_imgcategory"]').val(),n=new FormData;n.append("file",a),n.append("folderpath",i),n.append("houseID",pageID),n.append("imageCategory",s),$.ajax({url:"/plugins/intranet/admin/ajax/int_table_upload_img.php",type:"POST",data:n,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=e.loaded,i=e.total,s=(a/i*100).toFixed(2)+"%",n=t(a),o=t(i);$("#imgprogressbar").css("width",s),$("#imgpercent").html(s),$("#imgbyterec").html(n),$("#imgbytetotal").html(o)}},!1),e},success:function(t){if(console.log(t),"upload_success"==t.status){$("#imgoutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+t.status_msg+"</div>");var e=JSON.stringify(t),a=JSON.parse(e);$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){var a=$('<div id="'+e.id+'" class="gallery-item-'+e.id+" "+e.category+'" data-width="1" data-height="1"><div class="img_container"><img src="'+e.filethumbpath+'" alt="" class="image-responsive-height"></div><div class="overlays full-width"><div class="row full-height"><div class="col-5 full-height"><div class="text font-montserrat">'+e.filenamethumb.substring(e.filenamethumb.lastIndexOf(".")+1).toUpperCase()+'</div></div><div class="col-7 full-height"><div class="text"><a data-fancybox="gallery" href="'+e.filethumbpath+'" alt=""><button class="btn btn-info btn-xs btn-mini mr-1 fs-14" type="button"><i class="pg-image"></i></button></a><button class="btn btn-info btn-xs btn-mini fs-14 dialog-open mr-1" type="button" data-dialog="itemDetails"><i class="fa fa-edit"></i></button><button class="btn btn-info btn-xs btn-mini fs-14 delete-img" type="button" data-id="'+e.id+'"><i class="fa fa-trash"></i></button></div></div></div></div><div class="full-width padding-10"><p class="bold">Krátký Popis</p><p class="shortdesc">'+e.shortdescription+"</p></div></div>");$("#gallery_envo").prepend(a).isotope("prepended",a);var i=$("#"+e.id+".gallery-item-"+e.id);i.find(".dialog-open").click(openDialog),i.find(".delete-img").click(deleteImg)})}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)}else-1!=t.status.indexOf("upload_error")&&($("#imgoutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+t.status+" => "+t.status_msg+"</div>"),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(){},complete:function(){$("#imgprogress").hide(),$("#imgprogressbar").css("width",""),$("#imgoutput").show()}})}),$("#uploadBtnVideo").on("click",function(e){e.preventDefault(),$("#videooutput").hide(),$("#videoprogress").show(),$("#videopercent").html("0%");var a=$("#fileinput_video").prop("files")[0],i=$('input[name="folderpath"]').val(),s=$('select[name="envo_videocategory"]').val(),n=new FormData;n.append("file",a),n.append("folderpath",i),n.append("houseID",pageID),n.append("videoCategory",s),$.ajax({url:"/plugins/intranet/admin/ajax/int_table_upload_video.php",type:"POST",data:n,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=e.loaded,i=e.total,s=(a/i*100).toFixed(2)+"%",n=t(a),o=t(i);$("#videoprogressbar").css("width",s),$("#videopercent").html(s),$("#videobyterec").html(n),$("#videobytetotal").html(o)}},!1),e},success:function(t){if(console.log(t),"upload_success"==t.status){$("#videooutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+t.status_msg+"</div>");var e=JSON.stringify(t),a=JSON.parse(e);$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){})}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)}else-1!=t.status.indexOf("upload_error")&&($("#videooutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+t.status+" => "+t.status_msg+"</div>"),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(){},complete:function(){$("#videoprogress").hide(),$("#videoprogressbar").css("width",""),$("#videooutput").show()}})}),$(".delete-img").click(deleteImg)}),$(function(){$(".file-clear").click(function(){var t=$(this).parents(":eq(1)").attr("id");$("#"+t+" .file-filename").val(""),$("#"+t+" .file-clear").hide(),$("#"+t+" .file-input input:file").val(""),$("#"+t+" .file-input").css("border-radius","3px 0 0 3px"),$("#"+t+" .file-input-title").text("Vybrat Soubor")}),$(".file-input input:file").change(function(){var t=$(this).parents(":eq(2)").attr("id"),e=this.files[0];console.log($(this).val()),""!=$(this).val()?($("#"+t+" .file-input").css("border-radius","0"),$("#"+t+" .file-input-title").text("Změnit"),$("#"+t+" .file-clear").show(),$("#"+t+" .file-filename").val(e.name)):($("#"+t+" .file-filename").val(""),$("#"+t+" .file-clear").hide(),$("#"+t+" .file-input-title").text("Vybrat Soubor"))})}),$(function(){$("#int_table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Czech.json"},order:[],columnDefs:[{targets:"no-sort",orderable:!1}],pageLength:dataTablesSettings.pageLenght,dom:"<'row'<'col-sm-6'<'float-left m-b-20'f>><'col-sm-6'<'float-right m-r-20 hidden-xs'B>>><'row'<'col-sm-12'tr>><'row '<'col-sm-7'i><'float-right col-sm-5'p>>"})}),$(function(){$("#tableentrance").length>0&&$("#tableentrance").Tabledit({url:"/plugins/intranet/admin/ajax/int_table_update_ent.php",inputClass:"form-control",restoreButton:!1,lang:"cz",mutedClass:"text-muted warning",columns:{identifier:[0,"id"],editable:[[1,"entrance","input"],[2,"countapartment","input"],[3,"countetage","input"],[4,"elevator","select",'{"0": "Není známo", "1": "Ano", "2": "Ne"}']]},onSuccess:function(t){"delete_success"==t.status?($("#"+t.data[0].id).fadeOut(300,function(){$(this).remove()}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3),setInterval(function(){location.reload(!0)},5e3)):($("#"+t.data[0].id).removeClass(),$("#"+t.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3))}}),$("#tablecontacts").length>0&&$("#tablecontacts").Tabledit({url:"/plugins/intranet/admin/ajax/int_table_update_cont.php",inputClass:"form-control",restoreButton:!1,lang:"cz",mutedClass:"text-muted warning",columns:{identifier:[0,"id"],editable:[[1,"name","input"],[2,"address","input"],[3,"phone","input"],[4,"email","input"],[5,"commission","select",'{"0": "Není ve Výboru", "1": "Předseda", "2": "Člen Výboru", "3": "Pověřený vlastník"}']]},onSuccess:function(t){"delete_success"==t.status?($("#"+t.data[0].id).fadeOut(300,function(){$(this).remove()}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):($("#"+t.data[0].id).removeClass(),$("#"+t.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3))}}),$('table[id^="tableapartment_"]').length>0&&$('table[id^="tableapartment_"]').Tabledit({url:"/plugins/intranet/admin/ajax/int_table_update_apt.php",inputClass:"form-control",restoreButton:!1,lang:"cz",mutedClass:"text-muted warning",columns:{identifier:[0,"id"],editable:[[1,"number","input"],[2,"etage","input"],[3,"name","input"],[4,"phone","input"],[5,"commission","select",'{"0": "Není ve Výboru", "1": "Předseda", "2": "Člen Výboru", "3": "Pověřený vlastník"}']]},onSuccess:function(t){"delete_success"==t.status?($("#"+t.data[0].id).fadeOut(300,function(){$(this).remove()}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):($("#"+t.data[0].id).removeClass(),$("#"+t.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3))}}),$("#tableservice").length>0&&$("#tableservice").Tabledit({url:"/plugins/intranet/admin/ajax/int_table_update_serv.php",inputClass:"form-control",lang:"cz",mutedClass:"text-muted warning",debug:!1,columns:{identifier:[0,"id"],editable:[[1,"description","textarea",'{"rows": "4"}'],[3,"timestart","input"],[4,"timeend","input"]]},onDraw:function(){$("table tr td:nth-child(3) input").each(function(){$(this).datetimepicker({locale:envoWeb.envo_lang,format:"YYYY-MM-DD HH:mm:ss",icons:$.AdminEnvo.DateTimepicker.icons(),tooltips:$.AdminEnvo.DateTimepicker.tooltips(),showTodayButton:!0,showClear:!0,calendarWeeks:!0,ignoreReadonly:!0})})},onSuccess:function(t){"update_success"==t.status?setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3):"delete_success"==t.status?($("#"+t.data[0].id).addClass("strikeout"),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):"restore_success"==t.status?($("#"+t.data[0].id).removeClass("strikeout"),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):($("#"+t.data[0].id).removeClass(),$("#"+t.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3))}}),$("#tabledocu").length>0&&$("#tabledocu").Tabledit({url:"/plugins/intranet/admin/ajax/int_table_update_docu.php",inputClass:"form-control",restoreButton:!1,lang:"cz",mutedClass:"text-muted warning",columns:{identifier:[0,"id"],editable:[[2,"description","input"]]},onSuccess:function(t){"delete_success"==t.status?($("#"+t.data[0].id).fadeOut(300,function(){$(this).remove()}),setTimeout(function(){$.notify({message:t.status_msg},{type:"success",delay:2e3})},1e3)):($("#"+t.data[0].id).removeClass(),$("#"+t.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:t.status_msg},{type:"danger",delay:5e3})},1e3))}}),$("#addRowCont").click(addRowCont),$('input[name="addRowCont"]').on("keypress",function(t){13==t.which&&(t.preventDefault(),addRowCont())}),$("#addRowEnt").click(addRowEnt),$('input[name="addRowEnt"]').on("keypress",function(t){13==t.which&&(t.preventDefault(),addRowEnt())}),$(".addRowApt").click(addRowApt),$("#addRowServ").click(addRowServ)}),$(function(){var t;$("#addRowTower").on("click",function(e){e.preventDefault();var a=$("#contentTower");$("#contentChannel");a.find("div.alert").hide();var i=[];$('input[name="envo_towername[]"]').each(function(){var t=$(this);i.push([t.data("id")])});var s=Math.max.apply(Math,i);Math.min.apply(Math,i);t=s+1,$("#contentChannel select").append($("<option>",{value:t,text:"Vysílač ID "+t})),$("#contentChannel select").trigger("change"),a.append($('<div class="row-form"><div class="col-sm-5"><strong>Vysílač ID '+t+'</strong></div><div class="col-sm-7"><input type="text" name="envo_towername[]" class="form-control" data-id="'+t+'" value="Vysílač ID '+t+'"></div></div>'))}),$("#addRowChannel").on("click",function(t){t.preventDefault();var e=$("#contentChannel"),a=e.find("div.row-form").length+1;e.find("div.alert").hide(),e.append($('<div class="row-form"><div class="col-sm-4"><strong>Kanál '+a+'</strong></div><div class="col-sm-4"><select></select></div><div class="col-sm-4"><input type="text" name="envo_channelname[]" class="form-control"></div></div>'))})}),$(function(){if($(".nav.nav-tabs.nav-tabs-fillup").length>0){$(document).on("show.bs.tab",".nav.nav-tabs.nav-tabs-fillup",function(t){var e=$(t.target).attr("href").substr(1);window.location.hash=e});var t=window.location.hash;$('.nav.nav-tabs.nav-tabs-fillup a[href="'+t+'"]').tab("show")}}),$(function(){$("#addTask").on("click",function(t){t.preventDefault(),thisDataDialog=$(this).attr("data-dialog"),dialogEl=document.getElementById(thisDataDialog),dlg=new DialogFx(dialogEl,{onOpenDialog:function(t){console.log("OPEN")},onCloseDialog:function(t){console.log("CLOSE"),$("#saveTask").attr("disabled",!1)}}),dlg.toggle(dlg)}),$("#saveTask").on("click",function(t){t.preventDefault();var e=pageID,a=$("select[name=envo_addtaskpriority]").val(),i=$("select[name=envo_addtaskstatus]").val(),s=$("input[name=envo_addtasktitle]").val(),n=tinymce.get("envoEditorSmall").getContent(),o=$("input[name=envo_addtaskreminder]").val(),l=$("input[name=envo_addtasktime]").val();console.log(i),$.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_addnew_task.php",datatype:"json",data:{houseID:e,priority:a,status:i,title:s,description:n,reminder:o,time:l},success:function(t){if("success"==t.status){var e=JSON.stringify(t),a=JSON.parse(e),i="",s="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){s=e.id,i+='<div id="task_'+e.id+'" class="task_'+e.id+'"><div class="taskheader"><span>Task ID '+e.id+'</span><span class="float-right collapsetask">+</span></div><div class="taskinfo"><div class="container-fluid"><div class="table-responsive"><table class="table table-task"><thead><tr><th>Titulek</th><th>Priorita</th><th>Status</th><th>Datum Úkolu</th><th>Datum Připomenutí</th><th></th></tr></thead><tbody><tr><td>'+e.title+"</td><td>"+e.priority+"</td><td>"+e.status+"</td><td>"+e.time+"</td><td>"+e.reminder+'</td><td ><button type="button" id="editTask" class="btn btn-default btn-xs m-r-20 editTask" data-toggle="tooltipEnvo" title="" data-dialog="taskDialogEdit" data-original-title="Editovat" data-id="'+e.id+'"><i class="fa fa-edit"></i></button><button type="button" class="btn btn-danger btn-xs deleteTask" data-confirm-deltask="Jste si jistý, že chcete odstranit úkol <strong>'+e.title+'</strong>" data-toggle="tooltipEnvo" title="Odstranit" data-id="'+e.id+'"><i class="fa fa-trash-o"></i></button></td></tr></tbody></table></div></div></div><div class="taskcontent"><p><strong >Popis Úkolu:</strong></p><div class="taskdescription">'+e.description+"</div></div></div>"})}),$("#tasklist").prepend(i),$("#task_"+s+" .taskheader").click(clickTaskHeader),$("#task_"+s+" .editTask").click(openDialogEditTask),$("#task_"+s+" .deleteTask").click(confirmDeleteTask),$("#saveTask").attr("disabled",!0),$("#notificationcontainer_add").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()}else $("#notificationcontainer_add").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(){}})}),$("#udpateTask").on("click",function(t){t.preventDefault();var e=$("input[name=envo_edittaskid]").val(),a=pageID,i=$("select[name=envo_edittaskpriority]").val(),s=$("select[name=envo_edittaskstatus]").val(),n=$("input[name=envo_edittasktitle]").val(),o=tinymce.get("editTaskEditor").getContent(),l=$("input[name=envo_edittaskreminder]").val(),d=$("input[name=envo_edittasktime]").val();console.log(i),$.ajax({type:"POST",url:"/plugins/intranet/admin/ajax/int_table_update_task.php",datatype:"json",data:{taskID:e,houseID:a,priority:i,status:s,title:n,description:o,reminder:l,time:d},success:function(t){if("update_success"==t.status){var e=JSON.stringify(t),a=JSON.parse(e),i="",s="";$.each(a,function(t,e){"data"===t&&$.each(e,function(t,e){s=e.id,i+='<div class="taskheader"><span>Task ID '+e.id+'</span><span class="float-right collapsetask">+</span></div><div class="taskinfo"><div class="container-fluid"><div class="table-responsive"><table class="table table-task"><thead><tr><th>Titulek</th><th>Priorita</th><th>Status</th><th>Datum Úkolu</th><th>Datum Připomenutí</th><th></th></tr></thead><tbody><tr><td>'+e.title+"</td><td>"+e.priority+"</td><td>"+e.status+"</td><td>"+e.time+"</td><td>"+e.reminder+'</td><td><button type="button" id="editTask" class="btn btn-default btn-xs m-r-20 editTask" data-toggle="tooltipEnvo" title="" data-dialog="taskDialogEdit" data-id="'+e.id+'" data-original-title="Editovat"><i class="fa fa-edit"></i></button><button type="button" class="btn btn-danger btn-xs deleteTask" data-confirm-deltask="Jste si jistý, že chcete odstranit úkol <strong>'+e.title+'</strong>" data-toggle="tooltipEnvo" title="Odstranit" data-id="'+e.id+'"><i class="fa fa-trash-o"></i></button></td></tr></tbody></table></div></div></div><div class="taskcontent"><p><strong >Popis Úkolu:</strong></p><div class="taskdescription">'+e.description+"</div></div>"})}),$("#task_"+s).html(i),$("#task_"+s+" .taskheader").click(clickTaskHeader),$("#task_"+s+" .editTask").click(openDialogEditTask),$("#task_"+s+" .deleteTask").click(confirmDeleteTask),$("#notificationcontainer_edit").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()}else $("#notificationcontainer_edit").pgNotification({style:"bar",message:t.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(){}})}),$(".editTask").click(openDialogEditTask),$(".deleteTask").click(confirmDeleteTask),$(".taskheader").click(clickTaskHeader),initializeDateTimePicker("input[name=envo_addtasktime]"),initializeDateTimePicker("input[name=envo_addtaskreminder]")}),$(function(){$("#envo_delete_all").click(function(){var t=this.checked;t?$("#button_delete").prop("disabled",!1):$("#button_delete").attr("disabled",!0),$(".highlight").each(function(){$(this).prop("checked",t)})}),$(".highlight").change(function(){this.checked?$("#button_delete").prop("disabled",!1):$(".highlight").filter(":checked").length<1&&($("#envo_delete_all").prop("checked",!1),$("#button_delete").attr("disabled",!0))})});