var debug=!0;$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0};var htmlACE,texthtml,page=$.urlParam("p"),page1=$.urlParam("sp"),page2=$.urlParam("ssp"),pageID=$.urlParam("id");function aceboolean(e){return"1"==e}function getGPS_Data_OSM(e){e.preventDefault(),debug&&console.log("----------- fn getGPS_Data_OSM -----------"),$("#saveEnt").length&&$("#saveEnt").attr("disabled",!0),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!0);var r=$(this).parents(":eq(4)").attr("id"),t=$("#"+r+' input[name="envo_entstreet"]').val(),o=$.trim(t).replace(/\s/g,"+"),a=$('select[name="envo_housecity"]').find(":selected").data("city_name"),s=$.trim(a).replace(/\s/g,"+"),i=(new Date).getTime();debug&&(console.log("GPS Click fn | Parent ID: "+r),console.log("GPS Click fn | Adress: "+t+", "+a)),$.ajax({url:"/plugins/intranet2/admin/ajax/gpscoordinates_osm.php",type:"POST",dataType:"json",data:{street:o,city:s},cache:!1,timeout:2e4,beforeSend:function(){},success:function(t){var e,o,a,s,n;jQuery.isEmptyObject(t)?debug&&console.log("NO GPS DATA | Empty JSON Object"):(e=JSON.stringify(t),JSON.parse(e),s="",s+='<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle OSM)</small></h5><hr>',$.each(t.data,function(e){console.log(t.data[e]),o=t.data[e].lat,a=t.data[e].lon,s+='<div class="row"><div class="col-sm-1 text-center"><button class="btn btn-success btn-xs gps-select-ent" data-gps-lat="'+o+'" data-gps-lon="'+a+'">Vybrat</button></div><div class="col-sm-8"><p><span class="bold">'+t.data[e].display_name+"</span><br>GPS Koordináty => Latitude: "+o+" | Longitude: "+a+'</p></div><div class="col-sm-3 text-center"><a href="https://mapy.cz/zakladni?x='+a+"&y="+o+"&z=18&l=0&source=coor&id="+a+"%2C"+o+'" target="MapGPS" class="btn btn-info btn-xs m-r-10">Mapy.cz</a><a href="https://www.openstreetmap.org/?mlat='+o+"&mlon="+a+"&zoom=16#map=18/"+o+"/"+a+'" target="MapGPS" class="btn btn-info btn-xs">OSM</a></div><div class="col-sm-12"><hr class="dotted"></div></div>'}),s+="</div>",$("#"+r+" #outputajaxdata_gps").html("").prepend(s).show(),$(".gps-select-ent").click(selectGPS_Data_Ent),setTimeout(function(){$("#saveEnt").length&&$("#saveEnt").attr("disabled",!1),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!1)},1e3),n=msToTime(Math.floor((new Date).getTime()-i)),debug&&console.log("Ajax => Success Time: "+n))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})}function getGPS_Data_MAPY(e){e.preventDefault(),debug&&console.log("----------- fn getGPS_Data_MAPY -----------"),$("#saveEnt").length&&$("#saveEnt").attr("disabled",!0),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!0);var r=$(this).parents(":eq(4)").attr("id"),t=$("#"+r+' input[name="envo_entstreet"]').val(),o=$.trim(t).replace(/\s/g,"+"),a=$('select[name="envo_housecity"]').find(":selected").data("city_name"),s=$.trim(a).replace(/\s/g,"+"),i=(new Date).getTime();debug&&(console.log("GPS Click fn | Parent ID: "+r),console.log("GPS Click fn | Adress: "+t+", "+a)),$.ajax({url:"/plugins/intranet2/admin/ajax/gpscoordinates_mapy.php",type:"POST",dataType:"json",data:{street:o,city:s},cache:!1,timeout:2e4,beforeSend:function(){},success:function(t){var e,o,a,s,n;"success"==t.status&&(e=JSON.stringify(t),JSON.parse(e),s="",s+='<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle Mapy.cz)</small></h5><hr>',$.each(t.data,function(e){console.log(t.data[e]),o=t.data[e].y,a=t.data[e].x,s+='<div class="row"><div class="col-sm-1 text-center"><button class="btn btn-success btn-xs gps-select-ent" data-gps-lat="'+o+'" data-gps-lon="'+a+'">Vybrat</button></div><div class="col-sm-8"><p><span class="bold">'+t.data[e].title+"</span><br>GPS Koordináty => Latitude: "+o+" | Longitude: "+a+'</p></div><div class="col-sm-3 text-center"><a href="https://mapy.cz/zakladni?x='+a+"&y="+o+"&z=18&l=0&source=coor&id="+a+"%2C"+o+'" target="MapGPS" class="btn btn-info btn-xs m-r-10">Mapy.cz</a><a href="https://www.openstreetmap.org/?mlat='+o+"&mlon="+a+"&zoom=16#map=18/"+o+"/"+a+'" target="MapGPS" class="btn btn-info btn-xs">OSM</a></div><div class="col-sm-12"><hr class="dotted"></div></div>'}),s+="</div>",$("#"+r+" #outputajaxdata_gps").html("").prepend(s).show(),$(".gps-select-ent").click(selectGPS_Data_Ent),setTimeout(function(){$("#saveEnt").length&&$("#saveEnt").attr("disabled",!1),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!1)},1e3),n=msToTime(Math.floor((new Date).getTime()-i)),debug&&console.log("Ajax =>  Success Time: "+n))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})}function msToTime(e){function t(e,t){return("00"+e).slice(-(t=t||2))}var o=e%1e3,a=(e=(e-o)/1e3)%60,s=(e=(e-a)/60)%60;return t(s)+":"+t(a)+"."+t(o,3)}function initializeTinyMce(e,t){null==e&&(e="textarea"),$(e).length&&tinymce.init({selector:e,theme:"modern",width:"100%",height:t,language:envoWeb.envo_lang,content_style:".mce-content-body {font-size:12px;}",entity_encoding:"raw",plugins:["advlist autolink link charmap hr insertdatetime textcolor responsivefilemanager","searchreplace visualblocks paste","table"],paste_as_text:!0,menubar:"edit insert view format table",toolbar:"undo redo | bold italic | alignleft aligncenter alignjustify | bullist numlist | forecolor backcolor",statusbar:!1,valid_elements:"*[*]",insertdatetime_formats:["%H:%M:%S","%Y-%m-%d","%d.%m.%Y","%I:%M:%S %p","%D"],external_filemanager_path:"/assets/plugins/tinymce/plugins/filemanager/",filemanager_title:"Filemanager",external_plugins:{filemanager:"plugins/filemanager/plugin.min.js"}})}function initializeDateTimePicker(e){$(e).datetimepicker({locale:envoWeb.envo_lang,format:"DD.MM.YYYY",icons:$.AdminEnvo.DateTimepicker.icons(),tooltips:$.AdminEnvo.DateTimepicker.tooltips(),showTodayButton:!0,showClear:!0,calendarWeeks:!0,ignoreReadonly:!0,debug:!1})}function formatFileSize(e){return"number"!=typeof e?"":1e9<=e?(e/1e9).toFixed(2)+" GB":1e6<=e?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}function copyToClipboard(e,t){debug&&console.log("----------- fn copyToClipboard -----------");var o=$(t),a=document.queryCommandSupported("copy"),s=o.attr("data-original-title");if(debug&&(console.log(o),console.log("Element - original text:"+s)),!0===a){var n=document.createElement("input");n.value=$(e).val(),document.body.appendChild(n),n.select();try{var r=document.execCommand("copy")?"Zkopírováno !":"Oops, nezkopírováno !";o.attr("data-original-title",r).tooltip("show")}catch(e){console.log("Oops, není možné zkopírovat")}document.body.removeChild(n),o.attr("data-original-title",s)}else window.prompt("Zkopírovat do schránky: Ctrl+C or Command+C, Enter")}debug&&console.log("Jquery Parse URL | page - "+page+" | page1 - "+page1+" | page2 - "+page2+" | Data => pageID - "+pageID),$wrapLimitRange={min:aceEditor.acewraplimit,max:aceEditor.acewraplimit},$("#htmleditor").length&&((htmlACE=ace.edit("htmleditor")).setTheme("ace/theme/"+aceEditor.acetheme),htmlACE.session.setUseWrapMode(aceEditor.aceactivewrap),htmlACE.session.setWrapLimitRange($wrapLimitRange.min,$wrapLimitRange.max),htmlACE.setOptions({mode:"ace/mode/html_ruby",tabSize:aceEditor.acetabSize,useSoftTabs:!0,indentedSoftWrap:!1,highlightActiveLine:aceboolean(aceEditor.aceactiveline),showPrintMargin:!1,fontSize:aceEditor.fontSize,showInvisibles:aceEditor.aceinvisible,showGutter:aceboolean(aceEditor.acegutter)}),htmlACE.$blockScrolling=1/0,texthtml=$("#envo_editor").val(),htmlACE.session.setValue(texthtml));var urlExists=function(e,t){if(!$.isFunction(t))throw Error("Not a valid callback");$.ajax({type:"HEAD",url:e,success:$.proxy(t,this,!0),error:$.proxy(t,this,!1)})};function selectGPS_Data(e){e.preventDefault(),debug&&console.log("----------- fn selectGPS_Data -----------");var t,o=$(this).parents(":eq(4)").attr("id"),a=$(this),s=$("#"+o+" .mainmaps a.mapycz"),n=$("#"+o+" .mainmaps a.openstreet"),r=$("#"+o+" .loadingdata_gps"),i=a.attr("data-gps-lat"),l=a.attr("data-gps-lon");debug&&(console.log("Parent ID: "+o),console.log("GPS Coordinates - Latitude: "+i+" / Longitude: "+l)),r.html("Načítání ... Prosím počkejte").css("visibility","visible"),$("#"+o+" input[name=envo_house_maingpslat]").val(i).css("background-color","#FFF5CC"),$("#"+o+" input[name=envo_house_maingpslng]").val(l).css("background-color","#FFF5CC"),setTimeout(function(){$("#"+o+" input[name=envo_house_maingpslat]").css("background-color","#FFF"),$("#"+o+" input[name=envo_house_maingpslng]").css("background-color","#FFF")},8e3),setTimeout(function(){r.html("").css("visibility","hidden")},1e3),0<s.length||0<n.length?(debug&&console.log("Maps links => was found"),s.attr("href","https://mapy.cz/zakladni?x="+l+"&y="+i+"&z=18&l=0&source=coor&id="+l+"%2C"+i),n.attr("href","https://www.openstreetmap.org/?mlat="+i+"&mlon="+l+"&zoom=18#map=18/"+i+"/"+l)):(debug&&console.log("Maps links => was NOT found"),t='<a href="https://mapy.cz/zakladni?x='+l+"&y="+i+"&z=18&l=0&source=coor&id="+l+"%2C"+i+'" class="mapycz" target="MapGPS">Mapy.cz</a><span class="m-l-10 m-r-10">|</span><a href="https://www.openstreetmap.org/?mlat='+i+"&amp;mlon="+l+"&amp;zoom=18#map=18"+i+"/"+l+'" class="OpenStreetMaps" target="MapGPS">OSM</a>',$("#"+o+" .mainmaps").html(t)),$(".gps-select").each(function(){$(this).html("Vybrat")}),a.append('<i class="fa fa-check text-success-800 m-l-5"></i>')}function selectGPS_Data_Ent(e){e.preventDefault(),debug&&console.log("----------- fn selectGPS_Data_Ent -----------");var t=$(this).parents(":eq(5)").attr("id"),o=$(this),a=$("#"+t+" a.mapycz"),s=$("#"+t+" a.openstreet"),n=$("#"+t+" a.ikatastr"),r=$("#"+t+" .loadingdata_gps"),i=$("#"+t+" .loadingdata_ikatastr"),l=o.attr("data-gps-lat"),d=o.attr("data-gps-lon"),c="https://www.ikatastr.cz/#kde="+l+","+d+",19&mapa=osm&vrstvy=parcelybudovy&info="+l+","+d;debug&&(console.log("Parent ID: "+t),console.log("GPS Coordinates - Latitude: "+l+" / Longitude: "+d)),$("#saveEnt").length&&$("#saveEnt").attr("disabled",!0),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!0),r.html("Načítání ... Prosím počkejte").css("visibility","visible"),i.html("Načítání ... Prosím počkejte").css("visibility","visible"),a.attr("href","https://mapy.cz/zakladni?x="+d+"&y="+l+"&z=18&l=0&source=coor&id="+d+"%2C"+l),s.attr("href","https://www.openstreetmap.org/?mlat="+l+"&mlon="+d+"&zoom=16#map=18/"+l+"/"+d),n.attr("href",c),$("#"+t+" input[name=envo_housegpslat]").val(l).css("background-color","#FFF5CC"),$("#"+t+" input[name=envo_housegpslng]").val(d).css("background-color","#FFF5CC"),$("#"+t+" input[name=envo_houseikatastr]").val(c).css("background-color","#FFF5CC"),setTimeout(function(){$("#"+t+" input[name=envo_housegpslat]").css("background-color","#FFF"),$("#"+t+" input[name=envo_housegpslng]").css("background-color","#FFF"),$("#"+t+" input[name=envo_houseikatastr]").css("background-color","#FFF")},8e3),setTimeout(function(){r.html("").css("visibility","hidden"),i.html("").css("visibility","hidden"),$("#saveEnt").length&&$("#saveEnt").attr("disabled",!1),$("#udpateEnt").length&&$("#udpateEnt").attr("disabled",!1),$("#"+t+" #gpslink").show()},1e3),$(".gps-select-ent").each(function(){$(this).html("Vybrat")}),o.append('<i class="fa fa-check text-success-800 m-l-5"></i>')}$.fn.enterKey=function(o,a){return this.each(function(){$(this).keypress(function(e){var t=e.keyCode?e.keyCode:e.which;"13"!=t&&"10"!=t||a&&!e[a+"Key"]||o.call(this,e)})})},$(function(){"use strict";null!=page2&&"search_db"!=page1&&initializeTinyMce("textarea.envoEditorLarge","200")}),$(function(){"use strict";$('input[name="envo_houseic"]').on("keyup keypress input paste change",function(){var e=$.trim($(this).val()).replace(/\s/g,"");$("#ares_res a:first").attr("href","https://wwwinfo.mfcr.cz/cgi-bin/ares/darv_res.cgi?ico="+e+"&jazyk=cz&xml=1"),$("#ares_res a:last-child").attr("href","https://wwwinfo.mfcr.cz/cgi-bin/ares/darv_vreo.cgi?ico="+e+"&jazyk=cz&xml=1"),$("#justice_vor a").attr("href","https://or.justice.cz/ias/ui/rejstrik-$firma?ico="+e+"&jenPlatne=VSECHNY")}),$('input[name="envo_houseares"]').change(function(){"1"==this.value?$("#ares_res").show():"0"==this.value&&$("#ares_res").hide()}),$('input[name="envo_housejustice"]').change(function(){"1"===this.value?$("#justice_vor").show():"0"===this.value&&$("#justice_vor").hide()}),$("input[name=envo_houseikatastr]").keyup(function(){var e=$(this).parents(":eq(4)").attr("id"),t=$.trim($(this).val()).replace(/\s/g,"");0<$(this).val().length?$("#"+e+" .ikatastrlink a").attr("href",t):$("#"+e+" .ikatastrlink a").attr("href","https://www.ikatastr.cz/"),debug&&console.log("Katastr Keyup fn | Parent ID: "+e+" | Text: "+t)}),$("#loadAres").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadAres click -----------");var a=$.trim($('input[name="envo_dataares"]').val()).replace(/\s/g,""),r=(new Date).getTime();$.ajax({url:"/plugins/intranet2/admin/ajax/ares.php",type:"POST",dataType:"json",data:{ic:a},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ARES</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><spanspan style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){var t,o;"upload_success"==e.status?(debug&&console.log("ID města: "+e.mesto_id),t="",t+='<div class="col-sm-12"><h5>Získaná data z databáze Ares</h5><hr><p><strong>'+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span></p><hr><table class="table"><tbody><tr class="row"><th style="border-top: none;border-bottom: 1px solid #DEE2E6;" class="col-sm-4">Název</th><td class="col-sm-8">'+e.name+'</td></tr><tr class="row"><th style="border-top: none;border-bottom: 1px solid #DEE2E6;" class="col-sm-4">Katastrální území</th><td class="col-sm-8">'+e.katastralniuzemi+"</td></tr></tbody></table></div>",$("#outputaresdate").html("").prepend(t).show(),$("input[name=envo_housename]").val("SVJ domu "),$("input[name=envo_househeadquarters]").val(e.ulice+", "+e.mesto+" - "+e.katastralniuzemi+", PSČ "+e.psc).css("background-color","#FFF5CC"),$("input[name=envo_houseic]").val(e.ic).css("background-color","#FFF5CC"),$("input[name=envo_housestreet]").val(e.ulice).css("background-color","#FFF5CC"),$('select[name="envo_housecity"]').val(e.mesto_id),$('select[name="envo_housecity"] + span span.select2-selection').css("background-color","#FFF5CC"),$("input[name=envo_housepsc]").val(e.psc).css("background-color","#FFF5CC"),$("input[name=envo_housefname]").val(e.name).css("background-color","#FFF5CC"),$("input[name=envo_housefstreet]").val(e.ulice).css("background-color","#FFF5CC"),$("input[name=envo_housefcity]").val(e.mesto).css("background-color","#FFF5CC"),$("input[name=envo_housefpsc]").val(e.psc).css("background-color","#FFF5CC"),$("input[name=envo_housefic]").val(e.ic).css("background-color","#FFF5CC"),$("input[name=envo_housefdic]").val(e.dic).css("background-color","#FFF5CC"),$("input[name=envo_house_maingpsstreet]").val(e.ulice).css("background-color","#FFF5CC"),$('select[name="envo_house_maingpscity"]').val(e.mesto_id),$('select[name="envo_house_maingpscity"] + span span.select2-selection').css("background-color","#FFF5CC"),setTimeout(function(){$(["input[name=envo_househeadquarters]","input[name=envo_housestreet]",'select[name="envo_housecity"] + span span.select2-selection',"input[name=envo_housepsc]","input[name=envo_houseic]","input[name=envo_housefname]","input[name=envo_housefstreet]","input[name=envo_housefcity]","input[name=envo_housefpsc]","input[name=envo_housefic]","input[name=envo_housefdic]","input[name=envo_house_maingpsstreet]",'select[name="envo_house_maingpscity"] + span span.select2-selection'].join(", ")).css({"background-color":"#FFF"})},8e3),$("#ares_res a:first").attr("href","https://wwwinfo.mfcr.cz/cgi-bin/ares/darv_res.cgi?ico="+a+"&jazyk=cz&xml=1"),$("#ares_res a:last-child").attr("href","https://wwwinfo.mfcr.cz/cgi-bin/ares/darv_vreo.cgi?ico="+a+"&jazyk=cz&xml=1"),$("#justice_vor a").attr("href","https://or.justice.cz/ias/ui/rejstrik-$firma?ico="+a+"&jenPlatne=VSECHNY"),$('input[name=envo_houseares][value="1"]').prop("checked",!0),$('input[name=envo_housejustice][value="1"]').prop("checked",!0),$("#ares_res,#justice_vor").show(),$("select[name=envo_housecity]").trigger("change"),$("select[name=envo_house_maingpscity]").trigger("change"),$("#loadingdata").hide().html(""),$("#timer").timer("remove"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> ČÚZK: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3),o=msToTime(Math.floor((new Date).getTime()-r)),$("#ajaxTime").html(o),debug&&(console.log("Ajax => Success Time: "+o),console.log($('select[name="envo_housecity"]').find(":selected").data("city_name")))):(t="",t+='<div class="col-sm-12"><h5>Získaná data z databáze Ares</h5><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong>'+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span></p><hr><p>'+e.status_info+"</p></div>",$("#outputaresdate").html("").prepend(t).show(),$("#loadingdata").hide().html(""),$("#timer").timer("remove"),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3),o=msToTime(Math.floor((new Date).getTime()-r)),$("#ajaxTime").html(o),debug&&console.log("Ajax => Success Time: "+o))},error:function(e,t,o){$("#outputaresdate").html("").prepend('<div class="col-12"><h5>Získaná data z databáze Ares</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputaresdate .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-r));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})}),$("#loadCuzk").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadCuzk click -----------");var t=$('input[name="envo_house_maingpslat"]').val(),o=$('input[name="envo_house_maingpslng"]').val(),a=$('input[name="envo_house_maingpsstreet"]').val(),s=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),n=(new JTSK_Converter).WGS84toJTSK(t,o),r=n.y.toFixed(2),i=r.split(".")[0],l=n.x.toFixed(2),d=l.split(".")[0],c=(new Date).getTime();return debug&&(console.log("GPS Coordinates => Latitude: "+t+" / Longitude: "+o+"\n\n"),console.log("JTSK_Converter => Start"),console.log(n),console.log("JTSK_Converter => End \n\n"),console.log("JTSK_Converter => WGS84.lat: "+t),console.log("JTSK_Converter => WGS84.lon: "+o),console.log("JTSK_Converter => JTSK.x: "+n.y),console.log("JTSK_Converter => JTSK.y: "+n.x),console.log("JTSK_Converter => WGS84.lat / JTSK.x - two decimals: "+r),console.log("JTSK_Converter => WGS84.lon / JTSK.y - two decimals: "+l)),$.ajax({url:"/plugins/intranet2/admin/ajax/cuzk.php",type:"POST",dataType:"html",data:{x:i,y:d,street:a,city:s},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ČÚZK</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){var t=$(e).find("#ku_obec").text(),o=$(e).find("#ku_name_code").text();debug&&console.log("Finding Data => KU Obec: "+t+"| KU Katastrální území: "+o);var a=t.match(/\d+/),s=o.match(/\d+/);debug&&console.log("KU Data => KU Kód Obce: "+a+" | KU Kód Katastrálního území: "+s),$("#outputajaxdata_katastr").html("").prepend(e).show(),$('select[name="envo_house_cuzk_city"] option[data-city_cuzk_code="'+a+'"]').attr("selected","selected"),$('select[name="envo_house_cuzk_city"] + span span.select2-selection').css("background-color","#FFF5CC"),$('select[name="envo_house_cuzk_ku"] option[data-ku_cuzk_code="'+s+'"]').attr("selected","selected"),$('select[name="envo_house_cuzk_ku"] + span span.select2-selection').css("background-color","#FFF5CC"),$("select[name=envo_house_cuzk_city]").trigger("change"),$("select[name=envo_house_cuzk_ku]").trigger("change"),setTimeout(function(){$('select[name="envo_house_cuzk_city"] + span span.select2-selection').css("background-color","#FFF"),$('select[name="envo_house_cuzk_ku"] + span span.select2-selection').css("background-color","#FFF")},8e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> ČÚZK: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3);var n=msToTime(Math.floor((new Date).getTime()-c));$("#ajaxTime_katastr").html(n),debug&&console.log("Ajax => Success Time: "+n)},error:function(e,t,o){$("#outputajaxdata_katastr").html("").prepend('<div class="col-12"><h5>Získaná data z databáze ČÚZK dle adresy sídla</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_katastr .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-c));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}}),!1}),$("#loadObjCode1").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadObjCode click -----------");var t=$('input[name="envo_house_maingpslat"]').val(),o=$('input[name="envo_house_maingpslng"]').val(),r=$('input[name="envo_house_maingpsstreet"]').val(),i=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),a=(new JTSK_Converter).WGS84toJTSK(t,o),s=a.y.toFixed(2),n=(s.split(".")[0],a.x.toFixed(2)),l=(n.split(".")[0],(new Date).getTime());debug&&(console.log("GPS Coordinates => Latitude: "+t+" / Longitude: "+o+"\n\n"),console.log("JTSK_Converter => Start"),console.log(a),console.log("JTSK_Converter => End \n\n"),console.log("JTSK_Converter => WGS84.lat: "+t),console.log("JTSK_Converter => WGS84.lon: "+o),console.log("JTSK_Converter => JTSK.x: "+a.y),console.log("JTSK_Converter => JTSK.y: "+a.x),console.log("JTSK_Converter => WGS84.lat / JTSK.x - two decimals: "+s),console.log("JTSK_Converter => WGS84.lon / JTSK.y - two decimals: "+n)),$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ČÚZK</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer(),$.ajax({url:"https://services.cuzk.cz/wfs/inspire-ad-wfs.asp?service=WFS&version=2.0.0&request=GetFeature&StoredQuery_id=GetFeatureByPoint&srsName=urn:ogc:def:crs:EPSG::4326&POINT="+t+","+o+"&FEATURE_TYPE=Address",type:"POST",dataType:"xml",cache:!1,success:function(e){var t=e.getElementsByTagName("base:localId")[0].innerHTML;debug&&(console.log("CUZK inspire-ad-wfs => adId: "+t),console.log("CUZK inspire-ad-wfs => Links: http://vdp.cuzk.cz/vdp/ruian/adresnimista/"+t.split(".")[1]))},error:function(){},complete:function(){}}),$.ajax({url:"https://services.cuzk.cz/wfs/inspire-cp-wfs.asp?service=WFS&version=2.0.0&request=GetFeature&StoredQuery_id=GetFeatureByPoint&srsName=urn:ogc:def:crs:EPSG::4326&POINT="+t+","+o+"&FEATURE_TYPE=CadastralParcel",type:"POST",dataType:"xml",cache:!1,success:function(e){},error:function(){},complete:function(){}}),$.ajax({url:"https://services.cuzk.cz/wfs/inspire-bu-wfs.asp?service=WFS&version=2.0.0&request=GetFeature&StoredQuery_id=GetFeatureByPoint&srsName=urn:ogc:def:crs:EPSG::4326&POINT="+t+","+o+"&FEATURE_TYPE=Building",type:"POST",dataType:"xml",cache:!1,timeout:2e4,success:function(e){var t,o,a,s=e.getElementsByTagName("base:localId")[0];void 0!==s?(t=(t=e.getElementsByTagName("bu-base:name")[0])&&((t=t.getElementsByTagName("gn:text"))?t[0].textContent:null),o=e.getElementsByTagName("bu-base:reference")[0].textContent,debug&&(console.log("CUZK inspire-bu-wfs => buId: "+s.innerHTML),console.log("CUZK inspire-bu-wfs => buTag: "+t),console.log("CUZK inspire-bu-wfs => buVdpId: "+o)),a="",a+='<div  class="col-sm-12"><h5>Získaná data z databáze ČÚZK dle budov</h5><hr><p><strong>ČÚZK: Data byla nalezena a stažena</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime_katastr"></span></p><hr><p>Vybraná adresa pro vyhledání dat: '+r+", "+i+"</p><hr><p><strong>buId: </strong> "+s.innerHTML+'</p><p><strong style="color: #C10000;">Kód objektu (buVdpId): </strong> '+o+"</p><p><strong>Stavba na pozemku (buTag): </strong> "+t+'</p><p><strong>Detail stavebního objektu: </strong><a href="http://vdp.cuzk.cz/vdp/ruian/stavebniobjekty/'+o+'" target="WindowCUZK">Zobrazit detail objektu na ČÚZK</a></p><hr></div>',$("#outputajaxdata_katastr").html("").prepend(a).show(),$('input[name="envo_house_cuzk_objcode"]').val(o).css("background-color","#FFF5CC"),$("#cuzk_objdetail_link").html(""),$("<a/>",{href:"http://vdp.cuzk.cz/vdp/ruian/stavebniobjekty/"+o,text:"Zobrazit detail objektu",target:"WindowCUZK"}).appendTo($("#cuzk_objdetail_link")),setTimeout(function(){$('input[name="envo_house_cuzk_objcode"]').css("background-color","#FFF")},8e3),setTimeout(function(){$.notify({message:"<strong>Success:</strong> ČÚZK: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3)):(a="",a+='<div class="col-12"><h5>Získaná data z databáze ČÚZK dle budov</h5><hr>',a+="<p><strong>ČÚZK: Data nebyla nalezena</strong></p>",a+='<p>Doba zpracování požadavku: <span id="ajaxTime_katastr"></span></p><hr>',$("#outputajaxdata_katastr").html("").prepend(a).show(),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> ČÚZK: Data nebyla nalezena"},{type:"danger",delay:5e3})},1e3)),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-l));$("#ajaxTime_katastr").html(n),debug&&console.log("Ajax => Success Time: "+n)},error:function(e,t,o){$("#outputajaxdata_katastr").html("").prepend('<div class="col-12"><h5>Získaná data z databáze ČÚZK dle budov</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_katastr .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-l));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})}),$("#loadObjCode2").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadObjCode click -----------");var t=$('input[name="envo_house_maingpslat"]').val(),o=$('input[name="envo_house_maingpslng"]').val(),a=$('input[name="envo_house_maingpsstreet"]').val(),s=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),n=(new JTSK_Converter).WGS84toJTSK(t,o),r=n.y.toFixed(2),i=(r.split(".")[0],n.x.toFixed(2)),l=(i.split(".")[0],(new Date).getTime());debug&&(console.log("GPS Coordinates => Latitude: "+t+" / Longitude: "+o+"\n\n"),console.log("JTSK_Converter => Start"),console.log(n),console.log("JTSK_Converter => End \n\n"),console.log("JTSK_Converter => WGS84.lat: "+t),console.log("JTSK_Converter => WGS84.lon: "+o),console.log("JTSK_Converter => JTSK.x: "+n.y),console.log("JTSK_Converter => JTSK.y: "+n.x),console.log("JTSK_Converter => WGS84.lat / JTSK.x - two decimals: "+r),console.log("JTSK_Converter => WGS84.lon / JTSK.y - two decimals: "+i)),$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ČÚZK</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer(),$.ajax({url:"https://services.cuzk.cz/wfs/inspire-ad-wfs.asp?service=WFS&version=2.0.0&request=GetFeature&StoredQuery_id=GetFeatureByPoint&srsName=urn:ogc:def:crs:EPSG::4326&POINT="+t+","+o+"&FEATURE_TYPE=Address",type:"POST",dataType:"xml",cache:!1,success:function(e){var t=e.getElementsByTagName("base:localId")[0].innerHTML;debug&&(console.log("CUZK inspire-ad-wfs => adId: "+t),console.log("CUZK inspire-ad-wfs => Links: http://vdp.cuzk.cz/vdp/ruian/adresnimista/"+t.split(".")[1])),$.ajax({url:"/plugins/intranet2/admin/ajax/cuzk_code.php",type:"POST",dataType:"html",data:{adIdtxt:t.split(".")[1],street:a,city:s},cache:!1,timeout:2e4,beforeSend:function(){},success:function(e){var t=$(e).find("#stavebniobjekty").text();$("#outputajaxdata_katastr").html("").prepend(e).show(),$('input[name="envo_house_cuzk_objcode"]').val(t).css("background-color","#FFF5CC"),$("#cuzk_objdetail_link").html(""),$("<a/>",{href:"http://vdp.cuzk.cz/vdp/ruian/stavebniobjekty/"+t,text:"Zobrazit detail objektu",target:"WindowCUZK"}).appendTo($("#cuzk_objdetail_link")),setTimeout(function(){$('input[name="envo_house_cuzk_objcode"]').css("background-color","#FFF")},8e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> ČÚZK: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3);var o=msToTime(Math.floor((new Date).getTime()-l));$("#ajaxTime_katastr").html(o),debug&&console.log("Ajax => Success Time: "+o)},error:function(e,t,o){$("#outputajaxdata_katastr").html("").prepend('<div class="col-12"><h5>Získaná data z databáze ČÚZK dle adresního místa</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_katastr .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-l));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})},error:function(e,t,o){$("#outputajaxdata_katastr").html("").prepend('<div class="col-12"><h5>Získaná data z databáze ČÚZK dle adresního místa</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_katastr .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html("");var n=msToTime(Math.floor((new Date).getTime()-l));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})}),$("#loadIkatastr").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadIkatastr click -----------");var t=$('input[name="envo_house_maingpslat"]').val(),o=$('input[name="envo_house_maingpslng"]').val(),a=$('input[name="envo_house_maingpsstreet"]').val(),s=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),n="https://www.ikatastr.cz/#kde="+t+","+o+",19&mapa=osm&vrstvy=parcelybudovy&info="+t+","+o,r=(new Date).getTime();debug&&console.log("GPS Coordinates => Latitude: "+t+" / Longitude: "+o+"\n\n");var i="";i+='<div  class="col-sm-12"><h5>iKatastr - Link</h5><hr><p>Doba zpracování požadavku: <span id="ajaxTime_katastr"></span></p><hr><p>Vybraná adresa pro vyhledání dat: '+a+", "+s+'</p><hr><p><a href="'+n+'" target="WindowKATASTR">Zobrazit informace z Katastru</a></p><hr></div>',$("#outputajaxdata_katastr").html("").prepend(i).show();var l=msToTime(Math.floor((new Date).getTime()-r));$("#ajaxTime_katastr").html(l),debug&&console.log("Ajax => Success Time: "+l)}),$("#loadStatistic1").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #loadStatistic1 click -----------");var t,o=$.trim($('input[name="envo_house_cuzk_objcode"]').val()),a=o.trim().split(new RegExp([" ","\\+","-","/",", ",",","\\?"].join("|"),"g")),r=(new Date).getTime();0<o.length?$.ajax({url:"/plugins/intranet2/admin/ajax/statistics.php",type:"POST",dataType:"html",data:{objcode:a[0]},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">STATISTIKA</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){$("#outputajaxdata_statistics").html("").prepend(e).show(),$(".123456").each(function(){var e=$(this).data("val"),t=$(this).data("val-upl"),o=$(this).data("el"),a=$(this).data("el-name");$(o+'[name="'+a+'"]');$('input[name="'+a+'_upl"]').val(t),"select"==o?($('select[name="'+a+'"]').val(e),$('select[name="'+a+'"] + span span.select2-selection').css("background-color","#FFF5CC"),$('select[name="'+a+'"]').trigger("change"),setTimeout(function(){$('select[name="'+a+'"] + span span.select2-selection').css("background-color","#FFF")},8e3)):($('input[name="'+a+'"]').val(e).css("background-color","#FFF5CC"),setTimeout(function(){$('input[name="'+a+'"]').css("background-color","#FFF")},8e3))}),$("#loadingdata").hide().html(""),$("#timer").timer("remove"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> STATISTIKA: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3);var t=msToTime(Math.floor((new Date).getTime()-r));$("#ajaxTime_statistics").html(t),debug&&console.log("Ajax => Success Time: "+t)},error:function(e,t,o){$("#outputajaxdata_statistics").html("").prepend('<div class="col-12"><h5>Získaná Statistická data dle kódu objektu</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_statistics .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-r));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}}):($("#outputajaxdata_statistics").html("").prepend('<div class="col-sm-12"><h5>Získaná data z databáze Ares</h5><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong>Není zadán kód objektu na kartě "Katastr"</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span></p><hr></div>').show(),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:'<strong>Error:</strong> Není zadán kód objektu na kartě "Katastr"'},{type:"danger",delay:5e3})},1e3),t=msToTime(Math.floor((new Date).getTime()-r)),$("#ajaxTime_statistics").html(t),debug&&console.log("Ajax => Error Time: "+t))}),$("#loadStatistic2").click(function(e){e.preventDefault(),console.log("----------- fn #loadStatistic2 click -----------");var t=$('input[name="envo_house_maingpsstreet"]').val(),o=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),a=$.trim($('input[name="envo_house_cuzk_objcode"]').val()).replace(/\s/g,"+"),r=(new Date).getTime();$.ajax({url:"/plugins/intranet2/admin/ajax/statistics2.php",type:"POST",dataType:"html",data:{street:t,city:o,objcode:a},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">STATISTIKA 2</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){$("#outputajaxdata_statistics").html("").prepend(e).show(),setTimeout(function(){$.notify({message:"<strong>Success:</strong> STATISTIKA: Data byla nalezena a stažena"},{type:"success",delay:2e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var t=msToTime(Math.floor((new Date).getTime()-r));$("#ajaxTime_statistics").html(t),debug&&console.log("Ajax => Success Time: "+t)},error:function(e,t,o){$("#outputajaxdata_statistics").html("").prepend('<div class="col-12"><h5>Získaná Statistická data dle kódu objektu</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_statistics .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-r));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})}),$("#gps_osm").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #Gps_osm click -----------");var t=$(this).parents(":eq(2)").attr("id"),o=$('input[name="envo_house_maingpsstreet"]').val(),a=$.trim(o).replace(/\s+/g,"+"),s=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),n=$.trim(s).replace(/\s+/g,"+"),r=(new Date).getTime();debug&&(console.log("Parent ID: "+t),console.log("Gps_osm Click fn | Adress: "+o+", "+s)),$.ajax({url:"/plugins/intranet2/admin/ajax/gpscoordinates_osm.php",type:"POST",dataType:"json",data:{street:a,city:n},cache:!1,timeout:2e4,beforeSend:function(){},success:function(t){var o,a,s,e;"success"==t.status&&(s="",s+='<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle OSM)</small></h5><hr>',$.each(t.data,function(e){console.log(t.data[e]),o=t.data[e].lat,a=t.data[e].lon,s+='<div class="row"><div class="col-sm-1 text-center"><button class="btn btn-success btn-xs gps-select" data-gps-lat="'+o+'" data-gps-lon="'+a+'">Vybrat</button></div><div class="col-sm-9"><p><span class="bold">'+t.data[e].display_name+"</span><br>GPS Koordináty => Latitude: "+o+" | Longitude: "+a+'</p></div><div class="col-sm-2"><a href="https://mapy.cz/zakladni?x='+a+"&y="+o+"&z=18&l=0&source=coor&id="+a+"%2C"+o+'" target="MapGPS" class="btn btn-info btn-xs m-r-10">Mapy.cz</a><a href="https://www.openstreetmap.org/?mlat='+o+"&mlon="+a+"&zoom=16#map=18/"+o+"/"+a+'" target="MapGPS" class="btn btn-info btn-xs">OSM</a></div><div class="col-sm-12"><hr class="dotted"></div></div>'}),s+="</div>",$("#outputajaxdata_gps").html("").prepend(s).show(),$(".gps-select").click(selectGPS_Data),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+t.status_msg},{type:"success",delay:2e3})},1e3),e=msToTime(Math.floor((new Date).getTime()-r)),debug&&console.log("Ajax => Success Time: "+e))},error:function(e,t,o){$("#outputajaxdata_gps").html("").prepend('<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle OSM)</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_gps .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3);var n=msToTime(Math.floor((new Date).getTime()-r));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}})}),$("#gps_mapy").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #Gps_mapy click -----------");var t=$(this),o=t.text(),a=t.parents(":eq(2)").attr("id"),s=$('input[name="envo_house_maingpsstreet"]').val(),n=$.trim(s).replace(/\s+/g,"+"),r=$('select[name="envo_house_maingpscity"]').find(":selected").data("city_name"),i=$.trim(r).replace(/\s+/g,"+"),l=(new Date).getTime();debug&&(console.log("Parent ID: "+a),console.log("Gps_mapy Click fn | Adress: "+s+", "+r)),$.ajax({url:"/plugins/intranet2/admin/ajax/gpscoordinates_mapy.php",type:"POST",dataType:"json",data:{street:n,city:i},cache:!1,timeout:2e4,beforeSend:function(){t.text("Načítání GPS ...")},success:function(t){var o,a,s,e;"success"==t.status&&(s="",s+='<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle Mapy.cz)</small></h5><hr>',$.each(t.data,function(e){console.log(t.data[e]),o=t.data[e].y,a=t.data[e].x,s+='<div class="row"><div class="col-sm-1 text-center"><button class="btn btn-success btn-xs gps-select" data-gps-lat="'+o+'" data-gps-lon="'+a+'">Vybrat</button></div><div class="col-sm-9"><p><span class="bold">'+t.data[e].title+"</span><br>GPS Koordináty => Latitude: "+o+" | Longitude: "+a+'</p></div><div class="col-sm-2"><a href="https://mapy.cz/zakladni?x='+a+"&y="+o+"&z=18&l=0&source=coor&id="+a+"%2C"+o+'" target="MapGPS" class="btn btn-info btn-xs m-r-10">Mapy.cz</a><a href="https://www.openstreetmap.org/?mlat='+o+"&mlon="+a+"&zoom=16#map=18/"+o+"/"+a+'" target="MapGPS" class="btn btn-info btn-xs">OSM</a></div><div class="col-sm-12"><hr class="dotted"></div></div>'}),s+="</div>",$("#outputajaxdata_gps").html("").prepend(s).show(),$(".gps-select").click(selectGPS_Data),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+t.status_msg},{type:"success",delay:2e3})},1e3),e=msToTime(Math.floor((new Date).getTime()-l)),debug&&console.log("Ajax => Success Time: "+e))},error:function(e,t,o){$("#outputajaxdata_gps").html("").prepend('<div class="col-12"><h5>Seznam nalezených GPS Koordinátů <small>(Gps podle Mapy.cz)</h5><hr><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputajaxdata_gps .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3);var n=msToTime(Math.floor((new Date).getTime()-l));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){setTimeout(function(){t.text(o)},300)}})})}),$(function(){"use strict";initializeDateTimePicker("#datepickerTime"),initializeDateTimePicker("input[name=envo_videodate]")}),$(function(){"use strict";var e=$("#int2_table");e.length&&e.DataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Czech.json"},order:[],columnDefs:[{targets:"no-sort",orderable:!1}],pageLength:dataTablesSettings.pageLenght,dom:"<'row'<'col-sm-6'<'float-left m-b-20'f>><'col-sm-6'<'float-right m-r-20 hidden-xs'B>>><'row'<'col-sm-12'tr>><'row '<'col-sm-7'i><'float-right col-sm-5'p>>",mark:!0})}),$(function(){"use strict";$("#envo_delete_all").click(function(){var e=this.checked;e?$("#button_delete").prop("disabled",!1):$("#button_delete").attr("disabled",!0),$(".highlight").each(function(){$(this).prop("checked",e)})}),$(".highlight").change(function(){this.checked?$("#button_delete").prop("disabled",!1):$(".highlight").filter(":checked").length<1&&($("#envo_delete_all").prop("checked",!1),$("#button_delete").attr("disabled",!0))})}),$(function(){"use strict";function o(e){e.preventDefault();var t=$(this).attr("data-value");return $.ajax({url:"/plugins/intranet2/admin/ajax/int2_houseselect_process.php",type:"POST",datatype:"json",data:{valID:t},success:function(e){var t=$.parseJSON(e);$('input[name="envo_housename"]').val(t.name),$('input[name="envo_househeadquarters"]').val(t.headquarters),$('input[name="envo_housestreet"]').val(t.street),$('select[name="envo_housecity"]').val(t.city),$('input[name="envo_housepsc"]').val(t.psc),$('input[name="envo_houseic"]').val(t.ic),$('input[name="envo_dataares"]').val(t.ic),$('input[name="envo_housefname"]').val(t.housefname),$('input[name="envo_housefstreet"]').val(t.housefstreet),$('input[name="envo_housefcity"]').val(t.housefcity),$('input[name="envo_housefpsc"]').val(t.housefpsc),$('input[name="envo_housefic"]').val(t.housefic),$('input[name="envo_housefdic"]').val(t.housefdic),$('select[name="envo_estatemanagement"]').val(t.estatemanagement);$(["select[name=envo_housecity]","select[name=envo_estatemanagement]"].join(", ")).trigger("change"),$("#ENVOModalPlugin").modal("hide")},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}),!1}$("#houseSelect").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #houseSelect click -----------");var t=$(window).height()-155;$("#ENVOModalPlugin .modal-body").css({height:t,"overflow-y":"auto"}),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_houseselect_modal.php",type:"POST",dataType:"html",beforeSend:function(){$("#ENVOModalPlugin .modal-body").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>'),$("#ENVOModalPlugin").modal("show")},success:function(e){setTimeout(function(){$("#ENVOModalPlugin .modal-body").hide().html(e).fadeIn(900),$(".selecthouse").click(o),$("#int_table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Czech.json"},order:[],columnDefs:[{targets:"no-sort",orderable:!1}],pageLength:dataTablesSettings.pageLenght,dom:"<'row'<'col-sm-6'<'float-left m-b-20'f>><'col-sm-6'<'float-right m-r-20 hidden-xs'B>>><'row'<'col-sm-12'tr>><'row '<'col-sm-7'i><'float-right col-sm-5'p>>"})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})})}),$(function(){"use strict";$(".copyadress").click(function(e){e.preventDefault(),debug&&console.log("----------- fn .copyadress click -----------");$(this);var t,o=$("input[name=envo_housestreet]").val();t=$("input[name=envo_entstreet]").length?$("input[name=envo_entstreet]").val():"";var a,s=$('select[name="envo_housecity"]').find(":selected").data("city_name");a=0<t.length?t+", "+s:o+", "+s,debug&&console.log("Copyadress Click fn | Adress: "+a);var n=document.createElement("input");document.body.appendChild(n),n.setAttribute("id","dummy_id"),document.getElementById("dummy_id").value=a,n.select(),document.execCommand("copy"),document.body.removeChild(n)})}),$(function(){"use strict";function u(){debug&&console.log("----------- fn clickTaskHeader -----------");var e=$(this),t=e.children("span.collapsetask"),o=e.next().next();o.slideToggle(500,function(){t.text(function(){return o.is(":visible")?"-":"+"})})}function p(e){e.preventDefault(),debug&&console.log("----------- fn openDialogEditTask -----------");var t=$(this).attr("data-dialog"),o=$(this).attr("data-id");$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_dialog_task.php",type:"POST",datatype:"html",data:{taskID:o},beforeSend:function(){$("#"+t+" .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(e){setTimeout(function(){$("#"+t+" .dialog__overview").hide().html(e).fadeIn(900);try{tinymce.remove("textarea.envoEditorSmall")}catch(e){}initializeTinyMce("textarea.envoEditorSmall",300),$("#"+t+" .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("input[name=envo_edittasktime]"),initializeDateTimePicker("input[name=envo_edittaskreminder]")},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}});var a=document.getElementById(t),s=new DialogFx(a,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),$("#"+t+" .dialog__overview").html("")}});return s.toggle(s),!1}function g(e){e.preventDefault(),debug&&console.log("----------- fn confirmDeleteTask -----------");var o=$(this).attr("data-id");return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-deltask"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(e){var t;1==e&&(debug&&console.log("Delete Task - ID: "+o),t=o,debug&&console.log("----------- fn deleteTask -----------"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_delete_task.php",type:"POST",datatype:"json",data:{taskID:t},success:function(e){"delete_success"==e.status?($("#task_"+e.data[0].id).remove(),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}))}}),!1}$(".taskheader").click(u),$("#addTask").click(function(e){e.preventDefault(),debug&&console.log("----------- fn openDialogNewTask -----------");var a=$(this).attr("data-dialog");debug&&console.log("Add New Task Click fn | Dialog ID: "+a),$("#"+a+" .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>'),setTimeout(function(){$("#"+a+" .dialog__overview").load("/plugins/intranet2/admin/ajax/content_new_task.php",function(e,t,o){if("success"==t){debug&&console.log("Loading content | External content loaded successfully!");try{tinymce.remove("textarea.envoEditorSmall")}catch(e){}initializeTinyMce("textarea.envoEditorSmall",300),$("#"+a+" .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("input[name=envo_addtasktime]"),initializeDateTimePicker("input[name=envo_addtaskreminder]")}"error"==t&&debug&&console.log("Loading content | Error: "+o.status+": "+o.statusText)})},1e3);var t=document.getElementById(a),o=new DialogFx(t,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),$("#"+a+" .dialog__overview").html(""),$("#saveTask").attr("disabled",!1)}});return o.toggle(o),!1}),$("#saveTask").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #saveTask click -----------");var r=$(this),t=pageID,o=$("select[name=envo_addtaskpriority]").val(),a=$("select[name=envo_addtaskstatus]").val(),s=$("input[name=envo_addtasktitle]").val(),n=tinymce.get("envoEditorSmall").getContent(),i=$("input[name=envo_addtaskreminder]"),l=i.val(),d=$("input[name=envo_addtasktime]"),c=d.val();debug&&console.log("Save Task Click fn | Data => houseID - "+t+" | priority -  "+o+" | status - "+a+" | title - "+s+" | description - "+n+" | reminderval - "+l+" | timeval - "+c),0<c.length?0<l.length?$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_addnew_task.php",type:"POST",datatype:"json",data:{houseID:t,priority:o,status:a,title:s,description:n,reminder:l,time:c},success:function(e){var o,a,t,s=JSON.stringify(e),n=JSON.parse(s);"success"==e.status?(a=o="",$.each(n,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Save Task Click fn | Ajax -> Key data[id]: "+t.id),a=t.id,o+='<div id="task_'+t.id+'" class="task_'+t.id+'"><div class="taskheader bg-teal-600"><span>Task ID '+t.id+'</span><span class="float-right collapsetask">+</span></div><div class="taskinfo"><div class="table-responsive"><table class="table table-task"><thead><tr><th>Titulek</th><th>Priorita</th><th>Status</th><th>Datum Úkolu</th><th>Datum Připomenutí</th><th></th></tr></thead><tbody><tr><td>'+t.title+"</td><td>"+t.priority+"</td><td>"+t.status+"</td><td>"+t.time+"</td><td>"+t.reminder+'</td><td class="text-center"><button type="button" id="editTask" class="btn btn-default btn-xs m-r-20 editTask" data-toggle="tooltipEnvo" title="" data-dialog="taskDialogEdit" data-original-title="Editovat" data-id="'+t.id+'"><i class="fa fa-edit"></i></button><button type="button" class="btn btn-danger btn-xs deleteTask" data-confirm-deltask="Jste si jistý, že chcete odstranit úkol <strong>'+t.title+'</strong>" data-toggle="tooltipEnvo" title="Odstranit" data-id="'+t.id+'"><i class="fa fa-trash-o"></i></button></td></tr></tbody></table></div></div><div class="taskcontent"><p><strong >Popis Úkolu:</strong></p><div class="taskdescription">'+t.description+"</div></div></div>"})}),(t=$("#tasklist .alert.bg-info"))&&t.parent().remove(),$("#tasklist").prepend(o),$("#task_"+a+" .taskheader").click(u),$("#task_"+a+" .editTask").click(p),$("#task_"+a+" .deleteTask").click(g),r.attr("disabled",!0),$("#task_notify_add").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):(r.attr("disabled",!0),$("#task_notify_add").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show())},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}):(i.parent().addClass("has-error"),debug&&console.log("Save Task Click fn | Error E02")):(d.parent().addClass("has-error"),debug&&console.log("Save Task Click fn | Error E01"))}),$(".editTask").click(p),$("#udpateTask").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #udpateTask click -----------");var t=$("input[name=envo_edittaskid]").val(),o=pageID,a=$("select[name=envo_edittaskpriority]").val(),s=$("select[name=envo_edittaskstatus]").val(),n=$("input[name=envo_edittasktitle]").val(),r=tinymce.get("envoEditorSmall").getContent(),i=$("input[name=envo_edittaskreminder]"),l=i.val(),d=$("input[name=envo_edittasktime]"),c=d.val();c.length?l.length?$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_update_task.php",type:"POST",datatype:"json",data:{taskID:t,houseID:o,priority:a,status:s,title:n,description:r,reminder:l,time:c},success:function(e){var o,a,t=JSON.stringify(e),s=JSON.parse(t);"update_success"==e.status?(a=o="",$.each(s,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Update Task Click fn | Ajax -> Key data[id]: "+t.id),a=t.id,r=0<t.description.length?t.description:'<span class="bold text-warning-dark">Úkol nemá popis</span>',o+='<div class="taskheader bg-teal-600"><span>Task ID '+t.id+'</span><span class="float-right collapsetask">+</span></div><div class="taskinfo"><div class="table-responsive"><table class="table table-task"><thead><tr><th>Titulek</th><th>Priorita</th><th>Status</th><th>Datum Úkolu</th><th>Datum Připomenutí</th><th></th></tr></thead><tbody><tr><td>'+t.title+"</td><td>"+t.priority+"</td><td>"+t.status+"</td><td>"+t.time+"</td><td>"+t.reminder+'</td><td class="text-center"><button type="button" id="editTask" class="btn btn-default btn-xs m-r-20 editTask" data-toggle="tooltipEnvo" title="" data-dialog="taskDialogEdit" data-id="'+t.id+'" data-original-title="Editovat"><i class="fa fa-edit"></i></button><button type="button" class="btn btn-danger btn-xs deleteTask" data-confirm-deltask="Jste si jistý, že chcete odstranit úkol <strong>'+t.title+'</strong>" data-toggle="tooltipEnvo" title="Odstranit" data-id="'+t.id+'"><i class="fa fa-trash-o"></i></button></td></tr></tbody></table></div></div><div class="taskcontent"><p><strong >Popis Úkolu:</strong></p><div class="taskdescription">'+r+"</div></div>"})}),$("#task_"+a).html(o),$("#task_"+a+" .taskheader").click(u),$("#task_"+a+" .editTask").click(p),$("#task_"+a+" .deleteTask").click(g),$("#task_notify_edit").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):$("#task_notify_edit").pgNotification({style:"bar",message:e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}):(i.parent().addClass("has-error"),debug&&console.log("Update Task Click fn | Error E02")):(d.parent().addClass("has-error"),debug&&console.log("Update Task Click fn | Error E01"))}),$(".deleteTask").click(g)}),$(function(){"use strict";function r(e){e.preventDefault(),debug&&console.log("----------- fn getiKatastr_Link -----------");var t=$(this).parents(":eq(4)").attr("id"),o=$.trim($("#"+t+' input[name="envo_housegpslat"]').val()),a=$.trim($("#"+t+' input[name="envo_housegpslng"]').val()),s="https://www.ikatastr.cz/#kde="+o+","+a+",19&mapa=osm&vrstvy=parcelybudovy&info="+o+","+a;debug&&(console.log("Parent ID: "+t),console.log("GPS Coordinates - Latitude: "+o+" / Longitude: "+a)),$("#"+t+" input[name=envo_houseikatastr]").val(s),$("#"+t+" .ikatastrlink a.ikatastr").attr("href",s)}function p(e){e.preventDefault(),debug&&console.log("----------- fn openDialogEditEnt -----------");var t=$(this).attr("data-dialog"),o=$(this).attr("data-id");$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_dialog_ent.php",type:"POST",datatype:"html",data:{entID:o},beforeSend:function(){$("#entDialogEdit .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(e,t){setTimeout(function(){"success"==t&&(debug&&console.log("Loading content | External content loaded successfully!"),$("#entDialogEdit .dialog__overview").hide().html(e).fadeIn(900),$(".getgpsosm").click(getGPS_Data_OSM),$(".getgpsmapycz").click(getGPS_Data_MAPY),$("#getkatastrlink").click(r)),"error"==t&&debug&&console.log("Loading content | Error: "+xhr.status+": "+xhr.statusText)},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}});var a=document.getElementById(t),s=new DialogFx(a,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),$("#"+t+" .dialog__overview").html("")}});return s.toggle(s),!1}function g(e){e.preventDefault(),debug&&console.log("----------- fn confirmDeleteEnt -----------");var o=$(this).attr("data-id");return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-delent"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(e){var t;1==e&&(debug&&console.log("Delete Entrance - ID: "+o),t=o,debug&&console.log("----------- fn deleteEnt -----------"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_delete_ent.php",type:"POST",datatype:"json",data:{entID:t},success:function(e){"delete_success"==e.status?($("#ent_"+e.data[0].id).remove(),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}))}}),!1}$("#addEnt").click({element:'input[name="addEnt"]'},function(e){e.preventDefault(),debug&&console.log("----------- fn openDialogNewEnt -----------");var t,o,a=$(this).attr("data-dialog"),s=$(e.data.element),n=s.val();return debug&&console.log("Add New Entrance Click fn | Dialog ID: "+a),n.length?($("#"+a+" .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>'),s.parent().removeClass("has-error"),setTimeout(function(){$("#"+a+" .dialog__overview").load("/plugins/intranet2/admin/ajax/content_new_ent.php",function(e,t,o){"success"==t&&(debug&&console.log("Loading content | External content loaded successfully!"),$("#"+a+' input[name="envo_entstreet"]').val(n),$(".getgpsosm").click(getGPS_Data_OSM),$(".getgpsmapycz").click(getGPS_Data_MAPY),$("#getkatastrlink").click(r)),"error"==t&&debug&&console.log("Loading content | Error: "+o.status+": "+o.statusText)})},1e3),t=document.getElementById(a),(o=new DialogFx(t,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),s.val(""),$("#"+a+" .dialog__overview").html(""),$("#saveEnt").attr("disabled",!1)}})).toggle(o)):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte ulici a číslo vchodu."},{type:"danger",delay:5e3})},1e3),s.parent().addClass("has-error")),!1}),$("#saveEnt").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #saveEnt click -----------");var r=$(this),t=r.parents(":eq(3)").attr("id"),o=pageID,a=$("#"+t+" input[name=envo_entstreet]").val(),s=$("#"+t+" input[name=envo_entelevator]:checked").val(),n=$("#"+t+" input[name=envo_entapartment]").val(),i=$("#"+t+" input[name=envo_housegpslat]"),l=i.val(),d=$("#"+t+" input[name=envo_housegpslng]"),c=d.val(),u=$("#"+t+" input[name=envo_houseikatastr]").val();debug&&console.log("Save Entrance Click fn | Data => parentID - "+t+" | houseID - "+o+" | street -  "+a+" | elevator - "+s+" | apartment - "+n+" | gpslat - "+l+" | gpslng - "+c+" | ikatastr - "+u),0<l.length||0<c.length?$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_addnew_ent.php",type:"POST",datatype:"json",data:{houseID:o,street:a,elevator:s,apartment:n,gpslat:l,gpslng:c,ikatastr:u},success:function(e){var a,s,t,o=JSON.stringify(e),n=JSON.parse(o);"success"==e.status?(s=a="",$.each(n,function(e,t){"data"===e&&$.each(t,function(e,t){var o=1==t.elevator?"ANO":"NE";s=t.id,a+='<div class="box box-success"  id="ent_'+s+'"><div class="box-header with-border"><h3 class="box-title">Vchod <span class="bold">'+t.street+'</span></h3><span class="float-right bold">Ent ID '+s+'</span></div><div class="box-body no-padding"><div class="block"><div class="block-content"><div class="row"><div class="col-sm-5 p-3"><table class="table table-hover table-condensed"><caption style="caption-side: top;"><span class="m-r-50"><strong>GPS - Koordináty</strong></span><a href="https://mapy.cz/zakladni?x='+t.gpslng+"&y="+t.gpslat+"&z=18&l=0&source=coor&id="+t.gpslng+"%2C"+t.gpslat+'" class="mapycz" target="MapGPS">Zobrazit na Mapy.cz</a><span class="m-l-10 m-r-10">|</span><a href="https://www.openstreetmap.org/?mlat='+t.gpslat+"&amp;mlon=12.7325868&amp;zoom=16#map=18/"+t.gpslat+'/12.7325868" class="openstreet" target="MapGPS">Zobrazit na OSM</a></caption><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>GPS - Latitude</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gpslat+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>GPS - Longitude</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gpslng+'</span></td></tr></tbody></table></div><div class="col-sm-3 p-3"><table class="table table-hover table-condensed"><caption style="caption-side: top;"><span><strong>Technické informace</strong></span></caption><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Výtah</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+o+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Počet bytů</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.apartment+'</span></td></tr></tbody></table></div><div class="col-sm-4 p-3"><iframe src="https://api.mapy.cz/frame?params=%7B%22x%22%3A'+t.gpslng+"%2C%22y%22%3A"+t.gpslat+"%2C%22base%22%3A%221%22%2C%22layers%22%3A%5B%5D%2C%22zoom%22%3A17%2C%22url%22%3A%22https%3A%2F%2Fmapy.cz%2Fs%2F3qQPF%22%2C%22mark%22%3A%7B%22x%22%3A%22"+t.gpslng+"%22%2C%22y%22%3A%22"+t.gpslat+"%22%2C%22title%22%3A%22"+t.gpslat+"N%2C%20"+t.gpslng+'E%22%7D%2C%22overview%22%3Afalse%7D&amp;width=400&amp;height=280&amp;lang=cs" width="100%" height="200" style="border:none" frameBorder="0"></iframe></div></div></div></div></div><div class="box-footer"><button type="button" class="btn btn-danger  float-right deleteEnt" data-confirm-delent="Jste si jistý, že chcete odstranit vchod <strong>'+t.street+'</strong>" data-toggle="tooltipEnvo" data-placement="bottom" title="Odstranit" data-id="'+s+'"><i class="fa fa-trash-o"></i> Odstranění vchodu</button><button type="button" id="editEnt" class="btn btn-default float-right m-r-20 editEnt" data-toggle="tooltipEnvo" data-placement="bottom" title="Editace" data-dialog="entDialogEdit" data-id="'+s+'"><i class="fa fa-edit"></i> Editace vchodu</button></div></div>'})}),(t=$("#entlist .alert.bg-info"))&&t.parent().remove(),$("#entlist").prepend(a),$("#ent_"+s+" .editEnt").click(p),$("#ent_"+s+" .deleteEnt").click(g),r.attr("disabled",!0),$("#ent_notify_add").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):(r.attr("disabled",!0),$("#ent_notify_add").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show())},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}):(i.parent().addClass("has-error"),d.parent().addClass("has-error"),debug&&console.log("Save Ent Click fn | Error E01"))}),$(".editEnt").click(p),$("#udpateEnt").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #udpateEnt click -----------");var t=$(this);t.attr("disabled",!0);var o=t.parents(":eq(3)").attr("id"),a=$("#"+o+" input[name=envo_editentid]").val(),s=$("#"+o+" input[name=envo_entstreet]").val(),n=$("#"+o+" input[name=envo_entelevator]:checked").val(),r=$("#"+o+" input[name=envo_entapartment]").val(),i=$("#"+o+" input[name=envo_housegpslat]"),l=i.val(),d=$("#"+o+" input[name=envo_housegpslng]"),c=d.val(),u=$("#"+o+" input[name=envo_houseikatastr]").val();debug&&console.log("Update Entrance Click fn | Data => parentID - "+o+" | entID - "+a+" | street -  "+s+" | elevator - "+n+" | apartment - "+r+" | gpslat - "+l+" | gpslng - "+c+" | ikatastr - "+u),l.length||c.length?$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_update_ent.php",type:"POST",datatype:"json",data:{entID:a,street:s,elevator:n,apartment:r,gpslat:l,gpslng:c,ikatastr:u},success:function(e){var a,s,t=JSON.stringify(e),o=JSON.parse(t);"update_success"==e.status?(s=a="",$.each(o,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Save Task Ent fn | Ajax -> Key data[id]: "+t.id);var o=1==t.elevator?"ANO":"NE";s=t.id,a+='<div class="box-header with-border"><h3 class="box-title">Vchod <span class="bold">'+t.street+'</span></h3></div><div class="box-body no-padding"><div class="block"><div class="block-content"><div class="row"><div class="col-sm-5 p-3"><table class="table table-hover table-condensed"><caption style="caption-side: top;"><span class="m-r-50"><strong>GPS - Koordináty</strong></span><a href="https://mapy.cz/zakladni?x='+t.gpslng+"&y="+t.gpslat+"&z=18&l=0&source=coor&id="+t.gpslng+"%2C"+t.gpslat+'" class="mapycz" target="MapGPS">Zobrazit na Mapy.cz</a><span class="m-l-10 m-r-10">|</span><a href="https://www.openstreetmap.org/?mlat='+t.gpslat+"&amp;mlon=12.7325868&amp;zoom=16#map=18/"+t.gpslat+'/12.7325868" class="openstreet" target="MapGPS">Zobrazit na OSM</a></caption><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>GPS - Latitude</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gpslat+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>GPS - Longitude</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gpslng+'</span></td></tr></tbody></table></div><div class="col-sm-3 p-3"><table class="table table-hover table-condensed"><caption style="caption-side: top;"><span><strong>Technické informace</strong></span></caption><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Výtah</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+o+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Počet bytů</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.apartment+'</span></td></tr></tbody></table></div><div class="col-sm-4 p-3"><iframe src="https://api.mapy.cz/frame?params=%7B%22x%22%3A'+t.gpslng+"%2C%22y%22%3A"+t.gpslat+"%2C%22base%22%3A%221%22%2C%22layers%22%3A%5B%5D%2C%22zoom%22%3A17%2C%22url%22%3A%22https%3A%2F%2Fmapy.cz%2Fs%2F3qQPF%22%2C%22mark%22%3A%7B%22x%22%3A%22"+t.gpslng+"%22%2C%22y%22%3A%22"+t.gpslat+"%22%2C%22title%22%3A%22"+t.gpslat+"N%2C%20"+t.gpslng+'E%22%7D%2C%22overview%22%3Afalse%7D&amp;width=400&amp;height=280&amp;lang=cs" width="100%" height="200" style="border:none" frameBorder="0"></iframe></div></div></div></div></div><div class="box-footer"><button type="button" class="btn btn-danger  float-right deleteEnt" data-confirm-delent="Jste si jistý, že chcete odstranit vchod <strong>'+t.street+'</strong>" data-toggle="tooltipEnvo" data-placement="bottom" title="Odstranit" data-id="'+s+'"><i class="fa fa-trash-o"></i> Odstranění vchodu</button><button type="button" id="editEnt" class="btn btn-default float-right m-r-20 editEnt" data-toggle="tooltipEnvo" data-placement="bottom" title="Editace" data-dialog="entDialogEdit" data-id="'+s+'"><i class="fa fa-edit"></i> Editace vchodu</button></div>'})}),$("#ent_"+s).html(a),$("#ent_"+s+" .editEnt").click(p),$("#ent_"+s+" .deleteEnt").click(g),$("#ent_notify_edit").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):$("#ent_notify_edit").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){t.attr("disabled",!1)}}):(i.parent().addClass("has-error"),d.parent().addClass("has-error"),debug&&console.log("Update Ent Click fn | Error E01"))}),$(".deleteEnt").click(g)}),$(function(){"use strict";function m(e){e.preventDefault(),debug&&console.log("----------- fn openDialogEditCont -----------");var o=$(this).attr("data-dialog"),t=$(this).attr("data-id");$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_dialog_cont.php",type:"POST",datatype:"html",data:{contID:t},beforeSend:function(){$("#contDialogEdit .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(e,t){setTimeout(function(){if("success"==t){debug&&console.log("Loading content | External content loaded successfully!"),$("#contDialogEdit .dialog__overview").hide().html(e).fadeIn(900);try{tinymce.remove("textarea.envoEditorSmall")}catch(e){}initializeTinyMce("textarea.envoEditorSmall",300),$("#"+o+" .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("input[name=envo_birthdate]")}"error"==t&&debug&&console.log("Loading content | Error: "+xhr.status+": "+xhr.statusText)},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}});var a=document.getElementById(o),s=new DialogFx(a,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),$("#"+o+" .dialog__overview").html("")}});return s.toggle(s),!1}function f(e){e.preventDefault(),debug&&console.log("----------- fn confirmDeleteEnt -----------");var o=$(this).attr("data-id");return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-delcont"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(e){var t;1==e&&(debug&&console.log("Delete Contact - ID: "+o),t=o,debug&&console.log("----------- fn deleteCont -----------"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_delete_cont.php",type:"POST",datatype:"json",data:{contID:t},success:function(e){"delete_success"==e.status?($("#cont_"+e.data[0].id).remove(),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}))}}),!1}$("#addContact").click({element:'input[name="addContact"]'},function(e){e.preventDefault(),debug&&console.log("----------- fn openDialogNewCont -----------");var t,o,a=$(this).attr("data-dialog"),s=$(e.data.element),n=s.val().toUpperCase(),r=n.trim().split(new RegExp([" ","\\+","-","/",", ",",","\\?"].join("|"),"g"));return debug&&(console.log("Add New Contact Click fn | Dialog ID: "+a),console.log(r)),n.length?($("#"+a+" .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>'),s.parent().removeClass("has-error"),setTimeout(function(){$("#"+a+" .dialog__overview").load("/plugins/intranet2/admin/ajax/content_new_cont.php",function(e,t,o){if("success"==t){debug&&console.log("Loading content | External content loaded successfully!"),$("#"+a+' input[name="envo_contname"]').val(r[0]),$("#"+a+' input[name="envo_contsurname"]').val(r[1]);try{tinymce.remove("textarea.envoEditorSmall")}catch(e){}initializeTinyMce("textarea.envoEditorSmall",300),$("#"+a+" .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("input[name=envo_birthdate]")}"error"==t&&debug&&console.log("Loading content | Error: "+o.status+": "+o.statusText)})},1e3),t=document.getElementById(a),(o=new DialogFx(t,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE"),s.val(""),$("#"+a+" .dialog__overview").html(""),$("#saveContact").attr("disabled",!1)}})).toggle(o)):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte jméno a příjmení."},{type:"danger",delay:5e3})},1e3),s.parent().addClass("has-error")),!1}),$("#saveContact").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #saveContact click -----------");var r=$(this),t=pageID,o=$("input[name=envo_contdegree]").val(),a=$("input[name=envo_contname]").val(),s=$("input[name=envo_contsurname]").val(),n=$("input[name=envo_contaddress]").val(),i=$("input[name=envo_contphone]").val(),l=$("input[name=envo_contemail]").val(),d=$("input[name=envo_contfcb]").val(),c=$("select[name=envo_contstatus]").val(),u=$("input[name=envo_birthdate]").val(),p=$("input[name=envo_gender]:checked").val(),g=tinymce.get("envoEditorSmall").getContent();debug&&console.log("Save Contact Click fn | Data => houseID - "+t+" | degree -  "+o+" | name - "+a+" | surname - "+s+" | address - "+n+" | phone - "+i+" | email - "+l+" | facebook - "+d+" | status - "+c+" | birthdate - "+u+" | gender - "+p),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_addnew_cont.php",type:"POST",datatype:"json",data:{houseID:t,degree:o,name:a,surname:s,address:n,phone:i,email:l,facebook:d,status:c,birthdate:u,gender:p,description:g},success:function(e){var o,a,t,s=JSON.stringify(e),n=JSON.parse(s);"success"==e.status?(a=o="",$.each(n,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Save Contact Click fn | Ajax -> Key data[id]: "+t.id),a=t.id,o+='<div class="box box-success" id="cont_'+t.id+'"><div class="box-header with-border"><div class="row"><div class="col-12 col-sm-8"><div class="thumbnail-wrapper d32 circular b-white m-r-5 b-a b-white"><img width="35" height="35" src="'+t.genderimg+'"></div><h3 class="box-title">Jméno a příjmení: <span class="bold">'+t.degree+" "+t.name+" "+t.surname+'</span></h3></div><div class="col-12 col-sm-4"><span class="float-right bold" style="line-height: 33px;">Cont ID '+t.id+'</span></div></div></div><div class="box-body no-padding"><div class="block"><div class="block-content"><div class="row"><div class="col-sm-7 p-3"><table class="table table-hover table-condensed"><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);width: 30%;"><strong>Adresa bydliště</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);width: 70%;"><span>'+t.address+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Telefon</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.phone+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Email</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.email+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Facebook</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.facebook+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Funkce</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.status+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Datum narození</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.birthdate+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Pohlaví</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gender+'</span></td></tr></tbody></table></div><div class="col-sm-5 p-3"><label for="" class="m-b-10"><strong>Popis</strong></label><div>'+t.description+'</div></div></div></div></div></div><div class="box-footer"><button type="button" class="btn btn-danger  float-right deleteContact" data-confirm-delcont="Jste si jistý, že chcete odstranit kontakt <strong>'+t.degree+" "+t.name+" "+t.surname+'</strong>" data-toggle="tooltipEnvo" data-placement="bottom" title="Odstranit" data-id="'+t.id+'"><i class="fa fa-trash-o"></i> Odstranění kontaktu</button><button type="button" class="btn btn-default float-right m-r-20 editContact" data-toggle="tooltipEnvo" data-placement="bottom" title="Editace" data-dialog="contDialogEdit" data-id="'+t.id+'"><i class="fa fa-edit"></i> Editace kontaktu</button></div></div>'})}),(t=$("#contactlist .alert.bg-info"))&&t.parent().remove(),$("#contactlist").prepend(o),$("#cont_"+a+" .editContact").click(m),$("#cont_"+a+" .deleteContact").click(f),r.attr("disabled",!0),$("#contact_notify_add").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):(r.attr("disabled",!0),$("#contact_notify_add").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show())},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})}),$(".editContact").click(m),$("#udpateContact").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #udpateContact click -----------");$(this);var t=$("input[name=envo_editcontid]").val(),o=pageID,a=$("input[name=envo_contdegree]").val(),s=$("input[name=envo_contname]").val(),n=$("input[name=envo_contsurname]").val(),r=$("input[name=envo_contaddress]").val(),i=$("input[name=envo_contphone]").val(),l=$("input[name=envo_contemail]").val(),d=$("input[name=envo_contfcb]").val(),c=$("select[name=envo_contstatus]").val(),u=$("input[name=envo_birthdate]").val(),p=$("input[name=envo_gender]:checked").val(),g=tinymce.get("envoEditorSmall").getContent();$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_update_cont.php",type:"POST",datatype:"json",data:{contID:t,houseID:o,degree:a,name:s,surname:n,address:r,phone:i,email:l,facebook:d,status:c,birthdate:u,gender:p,description:g},success:function(e){var o,a,t=JSON.stringify(e),s=JSON.parse(t);"update_success"==e.status?(a=o="",$.each(s,function(e,t){"data"===e&&$.each(t,function(e,t){a=t.id,debug&&console.log("Update Contact Click fn | Ajax -> Key data[id]: "+a),o+='<div class="box-header with-border"><div class="row"><div class="col-12 col-sm-8"><div class="thumbnail-wrapper d32 circular b-white m-r-5 b-a b-white"><img width="35" height="35" src="'+t.genderimg+'"></div><h3 class="box-title">Jméno a příjmení: <span class="bold">'+t.degree+" "+t.name+" "+t.surname+'</span></h3></div><div class="col-12 col-sm-4"><span class="float-right bold" style="line-height: 33px;">Cont ID '+t.id+'</span></div></div></div><div class="box-body no-padding"><div class="block"><div class="block-content"><div class="row"><div class="col-sm-7 p-3"><table class="table table-hover table-condensed"><tbody><tr><th style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);width: 30%;"><strong>Adresa bydliště</strong></th><td style="border-top: 1px solid rgba(230,230,230,0.7);border-bottom: 1px solid rgba(230,230,230,0.7);width: 70%;"><span>'+t.address+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Telefon</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.phone+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Email</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.email+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Facebook</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.facebook+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Funkce</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.status+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Datum narození</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.birthdate+'</span></td></tr><tr><th style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><strong>Pohlaví</strong></th><td style="border-top: none;border-bottom: 1px solid rgba(230,230,230,0.7);"><span>'+t.gender+'</span></td></tr></tbody></table></div><div class="col-sm-5 p-3"><label for="" class="m-b-10"><strong>Popis</strong></label><div>'+t.description+'</div></div></div></div></div></div><div class="box-footer"><button type="button" class="btn btn-danger  float-right deleteContact" data-confirm-delcont="Jste si jistý, že chcete odstranit kontakt <strong>'+t.degree+" "+t.name+" "+t.surname+'</strong>" data-toggle="tooltipEnvo" data-placement="bottom" title="Odstranit" data-id="'+t.id+'"><i class="fa fa-trash-o"></i> Odstranění kontaktu</button><button type="button" class="btn btn-default float-right m-r-20 editContact" data-toggle="tooltipEnvo" data-placement="bottom" title="Editace" data-dialog="contDialogEdit" data-id="'+t.id+'"><i class="fa fa-edit"></i> Editace kontaktu</button></div>'})}),$("#cont_"+a).html(o),$("#cont_"+a+" .editContact").click(m),$("#cont_"+a+" .deleteContact").click(f),$("#cont_notify_edit").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):$("#task_notify_edit").pgNotification({style:"bar",message:e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})}),$(".deleteContact").click(f)}),$(function(){"use strict";$(".file-clear").click(function(){var e=$(this).parents(":eq(1)").attr("id");$("#"+e+" .file-filename").val(""),$("#"+e+" .file-clear").hide(),$("#"+e+" .file-input input:file").val(""),$("#"+e+" .file-input").css("border-radius","3px 0 0 3px"),$("#"+e+" .file-input-title").text("Vybrat Soubor")}),$(".file-input input:file").change(function(){var e=$(this).parents(":eq(2)").attr("id"),t=this.files[0];debug&&console.log($(this).val()),""!=$(this).val()?($("#"+e+" .file-input").css("border-radius","0"),$("#"+e+" .file-input-title").text("Změnit"),$("#"+e+" .file-clear").show(),$("#"+e+" .file-filename").val(t.name)):($("#"+e+" .file-filename").val(""),$("#"+e+" .file-clear").hide(),$("#"+e+" .file-input-title").text("Vybrat Soubor"))})}),$(function(){"use strict";function t(e){e.preventDefault(),debug&&console.log("----------- fn #uploadDocu -----------");var s=$('input[name="envo_descdocu"]'),t=s.val(),o=$("#fileinput_doc").prop("files")[0],a=$('input[name="folderpath"]').val(),n=new FormData;n.append("file",o),n.append("folderpath",a),n.append("houseID",pageID),n.append("description",t),$(".has-error-text").remove(),s.parent().removeClass("has-error"),0<t.length?($("#docuoutput").hide(),$("#docuprogress").show(),$("#docupercent").html("0%"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_upload_docu.php",type:"POST",data:n,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){var t,o,a,s,n;e.lengthComputable&&(a=((t=e.loaded)/(o=e.total)*100).toFixed(2)+"%",s=formatFileSize(t),n=formatFileSize(o),$("#docuprogressbar").css("width",a),$("#docupercent").html(a),$("#docubyterec").html(s),$("#docubytetotal").html(n))},!1),e},success:function(e){var o,t=JSON.stringify(e),a=JSON.parse(t);"upload_success"==e.status?($("#docuoutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+e.status_msg+"</div>"),o="",$.each(a,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Upload File fn | Data => id - "+t.id+" | fsize -  "+t.fsize+" | ftime - "+t.ftime+" | ficon - "+t.ficon+" | description - "+t.description+" | fullpath - "+t.fullpath),o+='<tr><td class="text-center">'+t.id+'</td><td class="text-center">'+t.ficon+"</td><td>"+t.description+"</td><td>"+t.ftime+'</td><td class="text-center"><a href="'+t.fullpath+'" target="_blank">Zobrazit</a> | <a href="'+t.fullpath+'" download>Stáhnout</a></td></tr>'})}),$("#tabledocu tbody").html(o),$("#tabledocu").Tabledit("update",{}),s.val(""),$("#upload .file-filename").val(""),$("#upload .file-clear").hide(),$("#upload .file-input input:file").val(""),$("#upload .file-input").css("border-radius","3px 0 0 3px"),$("#upload .file-input-title").text("Vybrat Soubor"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):-1!=e.status.indexOf("upload_error")&&($("#docuoutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+e.status+" => "+e.status_msg+"</div>"),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){$("#docuprogress").hide(),$("#docuprogressbar").css("width",""),$("#docuoutput").show()}})):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte popis souboru."},{type:"danger",delay:5e3})},1e3),s.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(s.parent()))}function o(e){e.preventDefault(),debug&&console.log("----------- fn #uploadBtnContractDocu -----------");var s=$('input[name="envo_constractdescdocu"]'),t=s.val(),o=$("#fileinput_doc").prop("files")[0],a=$('input[name="folderpath"]').val(),n=new FormData;n.append("file",o),n.append("folderpath",a),n.append("contractID",pageID),n.append("description",t),$(".has-error-text").remove(),s.parent().removeClass("has-error"),t.length?($("#docuoutput").hide(),$("#docuprogress").show(),$("#docupercent").html("0%"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_upload_contractdocu.php",type:"POST",data:n,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){var t,o,a,s,n;e.lengthComputable&&(a=((t=e.loaded)/(o=e.total)*100).toFixed(2)+"%",s=formatFileSize(t),n=formatFileSize(o),$("#docuprogressbar").css("width",a),$("#docupercent").html(a),$("#docubyterec").html(s),$("#docubytetotal").html(n))},!1),e},success:function(e){var o,t=JSON.stringify(e),a=JSON.parse(t);"upload_success"==e.status?($("#docuoutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+e.status_msg+"</div>"),o="",$.each(a,function(e,t){"data"===e&&$.each(t,function(e,t){debug&&console.log("Upload File fn | Data => id - "+t.id+" | fsize -  "+t.fsize+" | ftime - "+t.ftime+" | ficon - "+t.ficon+" | description - "+t.description+" | fullpath - "+t.fullpath),o+='<tr><td class="text-center">'+t.id+'</td><td class="text-center">'+t.ficon+"</td><td>"+t.description+'</td><td class="text-center"><a href="'+t.fullpath+'" target="_blank">Zobrazit</a> | <a href="'+t.fullpath+'" download>Stáhnout</a></td></tr>'})}),$("#tabledocu tbody").html(o),s.val(""),$("#upload .file-filename").val(""),$("#upload .file-clear").hide(),$("#upload .file-input input:file").val(""),$("#upload .file-input").css("border-radius","3px 0 0 3px"),$("#upload .file-input-title").text("Vybrat Soubor"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):-1!=e.status.indexOf("upload_error")&&($("#docuoutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+e.status+" => "+e.status_msg+"</div>"),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){$("#docuprogress").hide(),$("#docuprogressbar").css("width",""),$("#docuoutput").show()}})):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte popis souboru."},{type:"danger",delay:5e3})},1e3),s.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(s.parent()))}$("#uploadBtnDocu").click(t),$("input[name=envo_descdocu]").enterKey(function(e){t(e)}),$("#uploadBtnContractDocu").click(o),$("input[name=envo_constractdescdocu]").enterKey(function(e){o(e)})}),$(function(){"use strict";function l(e){e.preventDefault(),debug&&console.log("----------- fn openDialogEditImg -----------");var t=$(this).attr("data-dialog"),o=$(this).parents(":eq(4)").attr("id"),a=parseInt(/^.*\_(\d+)$/.exec(o)[1]);debug&&console.log("Image ID from DIV: "+a),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_dialog_img.php",type:"POST",datatype:"html",data:{imageID:a},beforeSend:function(){$("#imgDialogEdit .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(t){setTimeout(function(){$("#imgDialogEdit .dialog__overview").hide().html(t).fadeIn(900);var e=$("#imgfolderoriginal_path").val();$("#imgfolderoriginal").attr("href",e),$("#info1 .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}});var s=document.getElementById(t),n=new DialogFx(s,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE")}});return n.toggle(n),!1}function d(e){e.preventDefault(),debug&&console.log("----------- fn confirmdeleteImg -----------");var a=$(this).attr("data-id"),s=pageID;return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-delimg"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(e){var t,o;1==e&&(debug&&console.log("Delete Image - ID: "+a),t=a,o=s,debug&&console.log("----------- fn deleteImg -----------"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_delete_img.php",type:"POST",datatype:"json",data:{imageID:t,houseID:o},success:function(e){var o,t;"delete_success"==e.status?(o="",t=$("#gallery_1_"+e.data[0].id),c.isotope("remove",t).isotope("layout"),$("#gallery_0_"+e.data[0].id).remove(),$.each(e.img_count,function(e,t){o+='<span class="bold">'+t.year+"</span> -&gt; <span>Počet: "+t.countimg+"</span> / "}),$("#imgcount").html("").prepend(o),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}))}}),!1}function t(e){e.preventDefault(),debug&&console.log("----------- fn #uploadImg -----------");var t=$('input[name="envo_sdescimg"]'),o=t.val(),a=$('select[name="envo_imgcategory"]').find(":selected"),s=a.val(),n=$("#fileinput_img").prop("files")[0],r=$('input[name="folderpath"]').val(),i=new FormData;i.append("file",n),i.append("folderpath",r),i.append("houseID",pageID),i.append("imgSdesc",o),i.append("imgCat",s),$(".has-error-text").remove(),t.parent().removeClass("has-error"),a.parent().removeClass("has-error"),s.length?o.length?($("#imgoutput").hide(),$("#imgprogress").show(),$("#imgpercent").html("0%"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_upload_img.php",type:"POST",data:i,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){var t,o,a,s,n;e.lengthComputable&&(a=((t=e.loaded)/(o=e.total)*100).toFixed(2)+"%",s=formatFileSize(t),n=formatFileSize(o),$("#imgprogressbar").css("width",a),$("#imgpercent").html(a),$("#imgbyterec").html(s),$("#imgbytetotal").html(n))},!1),e},success:function(e){var o,t=JSON.stringify(e),a=JSON.parse(t);"upload_success"==e.status?($("#imgoutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+e.status_msg+"</div>"),o="",$.each(a,function(e,t){"img_count"===e&&($.each(t,function(e,t){o+='<span class="bold">'+t.year+"</span> -&gt; <span>Počet: "+t.countimg+"</span> / "}),$("#imgcount").html("").prepend(o)),"data"===e&&$.each(t,function(e,t){debug&&console.log("EXIF create date => "+t.exifcreatedate_format);var o=$('<div id="gallery_1_'+t.id+'" class="gallery-item-'+t.id+" "+t.category+'" data-width="1" data-height="1" style="background-color: #ffe858; color: #000"><div class="img_container"><img src="'+t.filethumbpath+'" alt="" class="image-responsive-height"></div><div class="overlays full-width"><div class="row full-height"><div class="col-5 full-height"><div class="text font-montserrat">'+t.filenamethumb.substring(t.filenamethumb.lastIndexOf(".")+1).toUpperCase()+'</div></div><div class="col-7 full-height"><div class="text"><a data-fancybox="gallery" href="'+t.filethumbpath+'"><button class="btn btn-info btn-xs btn-mini mr-1 fs-14" type="button"><i class="pg-image"></i></button></a><button class="btn btn-info btn-xs btn-mini fs-14 dialog-open-img mr-1" type="button" data-dialog="imgDialogEdit"><i class="fa fa-edit"></i></button><button class="btn btn-info btn-xs btn-mini fs-14 delete-img" type="button" data-id="'+t.id+'"  data-confirm-delimg="Jste si jistý, že chcete odstranit obrázek?"><i class="fa fa-trash"></i></button></div></div></div></div><div class="full-width padding-10"><p><strong>Krátký Popis:</strong><span class="shortdesc m-l-10">'+t.shortdescription+'</span></p><p class="mb-0"><strong>Datum pořízení:</strong><span class="date m-l-10">'+t.exifcreatedate_format+'</span></p><p class="mb-0"><strong>Datum uploadu:</strong><span class="date m-l-10">'+t.ftime+"</span></p></div></div>");c.prepend(o).isotope("prepended",o);var a=$("#gallery_1_"+t.id+".gallery-item-"+t.id);a.find(".dialog-open-img").click(l),a.find(".delete-img").click(d);var s=$("#isotope_photo .alert.bg-info");s&&s.parent().remove()})}),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):-1!=e.status.indexOf("upload_error")&&($("#imgoutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+e.status+" => "+e.status_msg+"</div>"),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){$("#imgprogress").hide(),$("#imgprogressbar").css("width",""),$("#imgoutput").show()}})):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte popis souboru."},{type:"danger",delay:5e3})},1e3),t.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(t.parent())):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Vyberte kategorii."},{type:"danger",delay:5e3})},1e3),a.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(a.parent()))}var a,s,c,e,o,n,r;$("#gallery_envo_1").length&&((c=$("#gallery_envo_1")).isotope({itemSelector:'div[class^="gallery-item-"]',masonry:{columnWidth:280,gutter:10,isFitWidth:!0},filter:function(){var e=$(this),t=!a||e.text().match(a),o=!s||e.is(s);return t&&o}}),e=$("#quicksearch").keyup((o=function(){a=new RegExp(e.val(),"gi"),c.isotope()},function(){r&&clearTimeout(r),setTimeout(function(){o(),r=null},n||100)})),$("#imagefilters").on("click",".filter",function(e){e.preventDefault();$(this);s=$(this).attr("data-filter"),c.isotope()}),$("#imagefilters .filter").on("click",function(){$("#imagefilters").find(".active").removeClass("active"),$(this).addClass("active")}),$('a[href="#cmsPage11"]').on("shown.bs.tab",function(e){c.isotope("layout")})),$("#showPhotoList").on("click",function(e){$(this).removeClass("btn-info").addClass("btn-complete"),$("#showFiltrPhoto").removeClass("btn-complete").addClass("btn-info"),$("#list_photo").fadeIn(500),$("#isotope_photo").fadeOut(500)}),$("#showFiltrPhoto").on("click",function(e){$(this).removeClass("btn-info").addClass("btn-complete"),$("#showPhotoList").removeClass("btn-complete").addClass("btn-info"),$("#isotope_photo").fadeIn(500),$("#list_photo").fadeOut(500),setTimeout(function(){c.isotope("layout")},500)}),$("#uploadBtnImg").click(t),$("input[name=envo_sdescimg]").enterKey(function(e){t(e)}),$(".delete-img").click(d),$(".dialog-open-img").click(l),$("#udpateImg").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #udpateImg click -----------");var t=$("input[name=envo_editimgid]").val(),o=$("#desc_img").val(),a=$("#shortdesc_img").val(),s=$('select[name="envo_imgcategory_dialog"]').val();$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_update_img.php",type:"POST",datatype:"json",data:{imageID:t,descImage:o,shortdescImage:a,catImage:s},success:function(e){var t,o;"update_success"==e.status?($("#timeedit").html(e.data[0].updated),(t=$("#gallery_1_"+e.data[0].id+".gallery-item-"+e.data[0].id)).find(".shortdesc").text(e.data[0].shortdescription),t.find(".date").text(e.data[0].exifcreatedate_format),o=$("#gallery_1_"+e.data[0].id).attr("class").split(" ")[0],$("#gallery_1_"+e.data[0].id+"."+o).removeClass().addClass(o+" "+e.data[0].category),$("#img_notify_edit").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):$("#img_notify_edit").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})})}),$(function(){"use strict";function p(e){e.preventDefault(),debug&&console.log("----------- fn openDialogEditVideo -----------");var t=$(this).attr("data-dialog"),o=$(this).parents(":eq(4)").attr("id");debug&&console.log("Video ID from DIV: "+o),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_dialog_video.php",type:"POST",datatype:"html",data:{videoID:o},beforeSend:function(){$("#videoDialogEdit .dialog__overview").html('<div style="display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20">Načítání ... Prosím počkejte</div></div>')},success:function(t){setTimeout(function(){$("#videoDialogEdit .dialog__overview").hide().html(t).fadeIn(900);var e=$("#videofolderoriginal_path").val();$("#videofolderoriginal").attr("href",e),$("#info1 .selectpicker").select2({minimumResultsForSearch:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"zindex1060"}),initializeDateTimePicker("#date_video")},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}});var a=document.getElementById(t),s=new DialogFx(a,{onOpenDialog:function(e){debug&&console.log("DialogFX: OPEN")},onCloseDialog:function(e){debug&&console.log("DialogFX: CLOSE")}});return s.toggle(s),!1}function g(e){e.preventDefault(),debug&&console.log("----------- fn confirmdeleteVideo -----------");var o=$(this).attr("data-id");return bootbox.setLocale(envoWeb.envo_lang),bootbox.confirm({title:"Potvrzení o odstranění!",message:$(this).attr("data-confirm-delvideo"),className:"bootbox-confirm-del",animate:!0,buttons:{confirm:{className:"btn-success"},cancel:{className:"btn-danger"}},callback:function(e){var t;1==e&&(debug&&console.log("Delete Video - ID: "+o),t=o,debug&&console.log("----------- fn deleteVideo -----------"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_delete_video.php",type:"POST",datatype:"json",data:{videoID:t},success:function(e){var t;"delete_success"==e.status?(t=$("#"+e.data[0].id),n.isotope("remove",t).isotope("layout"),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:5e3})},1e3)},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}}))}}),!1}var a,s,n,e,t,o,r,i=$("#videogallery_envo");i.length&&((n=$("#videogallery_envo")).isotope({itemSelector:'div[class^="gallery-item-"]',masonry:{columnWidth:280,gutter:10,isFitWidth:!0},filter:function(){var e=$(this),t=!a||e.text().match(a),o=!s||e.is(s);return t&&o}}),e=$("#videoquicksearch").keyup((t=function(){a=new RegExp(e.val(),"gi"),i.isotope()},function(){r&&clearTimeout(r),setTimeout(function(){t(),r=null},o||100)})),$("#videofilters").on("click",".filter",function(e){e.preventDefault();$(this);s=$(this).attr("data-filter"),n.isotope()}),$("#videofilters .filter").on("click",function(){$("#videofilters").find(".active").removeClass("active"),$(this).addClass("active")}),$('a[href="#cmsPage12"]').on("shown.bs.tab",function(e){n.isotope("layout")})),$("#uploadBtnVideo").click(function(e){e.preventDefault(),debug&&console.log("----------- fn #uploadBtnVideo -----------");var t=$("#fileinput_video").prop("files")[0],o=$("#fileinput_videothumb").prop("files")[0],a=$('input[name="folderpath"]').val(),s=$('select[name="envo_videocategory"]').find(":selected"),n=s.val(),r=$('input[name="envo_sdescvideo"]'),i=r.val(),l=$('input[name="envo_videowidth"]').val(),d=$('input[name="envo_videoheight"]').val(),c=$('input[name="envo_videodate"]').val(),u=new FormData;u.append("file",t),u.append("filethumb",o),u.append("folderpath",a),u.append("houseID",pageID),u.append("videoCat",n),u.append("videoSdesc",i),u.append("videoWidth",l),u.append("videoHeight",d),u.append("videoDate",c),debug&&console.log("Upload Video fn | Data => videocat - "+n+" | videosdesc -  "+i+" | videowidth - "+l+" | videoheight - "+d+" | videodate - "+c),$(".has-error-text").remove(),r.parent().removeClass("has-error"),s.parent().removeClass("has-error"),n.length?i.length?($("#videooutput").hide(),$("#videoprogress").show(),$("#videopercent").html("0%"),$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_upload_video.php",type:"POST",data:u,contentType:!1,cache:!1,processData:!1,beforeSend:function(){},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){var t,o,a,s,n;e.lengthComputable&&(a=((t=e.loaded)/(o=e.total)*100).toFixed(2)+"%",s=formatFileSize(t),n=formatFileSize(o),$("#videoprogressbar").css("width",a),$("#videopercent").html(a),$("#videobyterec").html(s),$("#videobytetotal").html(n))},!1),e},success:function(e){var t=JSON.stringify(e),o=JSON.parse(t);"upload_success"==e.status?($("#videooutput").html('<div class="alert alert-success" role="alert"><button class="close" data-dismiss="alert"></button><strong>Success: </strong>'+e.status_msg+"</div>"),$.each(o,function(e,t){"data"===e&&$.each(t,function(e,t){var o=$('<div id="'+t.id+'" class="gallery-item-'+t.id+" "+t.category+'" data-width="1" data-height="1" style="background-color: #ffe858; color: #000"><div class="img_container"><img src="'+t.filethumbpath+'" alt="" class="image-responsive-height"></div><div class="overlays full-width"><div class="row full-height"><div class="col-5 full-height"><div class="text font-montserrat">'+t.filename.substring(t.filename.lastIndexOf(".")+1).toUpperCase()+'</div></div><div class="col-7 full-height"><div class="text"><a class="btn btn-info btn-xs btn-mini mr-1 fs-14" data-fancybox data-width="'+t.width+'" data-height="'+t.height+'" href="'+t.filepath+'"><i class="pg-video" style="position: relative;top: 2px;"></i></a><button class="btn btn-info btn-xs btn-mini fs-14 dialog-open-video mr-1" type="button" data-dialog="videoDialogEdit"><i class="fa fa-edit"></i></button><button class="btn btn-info btn-xs btn-mini fs-14 delete-video" type="button" data-id="'+t.id+'"  data-confirm-delvideo="Jste si jistý, že chcete odstranit video?"><i class="fa fa-trash"></i></button></div></div></div></div><div class="full-width padding-10"><p><strong>Krátký Popis:</strong><span class="shortdesc m-l-10">'+t.shortdescription+'</span></p><p class="mb-0"><strong>Datum videa:</strong><span class="date m-l-10">'+t.videotime+'</span></p><p class="mb-0"><strong>Datum uploadu:</strong><span class="date m-l-10">'+t.created+"</span></p></div></div>");$("#videogallery_envo").prepend(o).isotope("prepended",o);var a=$("#"+t.id+".gallery-item-"+t.id);a.find(".dialog-open-video").click(p),a.find(".delete-video").click(g)})}),setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):-1!=e.status.indexOf("upload_error")&&($("#videooutput").html('<div class="alert alert-danger" role="alert"><button class="close" data-dismiss="alert"></button><strong>Error: </strong>'+e.status+" => "+e.status_msg+"</div>"),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3))},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){$("#videoprogress").hide(),$("#videoprogressbar").css("width",""),$("#videooutput").show()}})):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte popis souboru."},{type:"danger",delay:5e3})},1e3),r.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(r.parent())):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Vyberte kategorii."},{type:"danger",delay:5e3})},1e3),s.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:"absolute"},text:"Vyplňte označenou položku"}).appendTo(s.parent()))}),$(".delete-video").click(g),$(".dialog-open-video").click(p),$("#udpateVideo").on("click",function(e){e.preventDefault(),debug&&console.log("----------- fn #udpateVideo click -----------");var t=$("input[name=envo_editvideoid]").val(),o=$("#desc_video").val(),a=$("#shortdesc_video").val(),s=$('select[name="envo_videocategory_dialog"]').val(),n=$("#date_video").val();$.ajax({url:"/plugins/intranet2/admin/ajax/int2_table_update_video.php",type:"POST",datatype:"json",data:{videoID:t,descVideo:o,shortdescVideo:a,catVideo:s,dateVideo:n},success:function(e){var t,o;"update_success"==e.status?($("#timeedit").html(e.data[0].updated),(t=$("#"+e.data[0].id+".gallery-item-"+e.data[0].id)).find(".shortdesc").text(e.data[0].shortdescription),t.find(".videodate").text(e.data[0].videodate_format),t.find(".uploaddate").text(e.data[0].createdate_format),o=$("#"+e.data[0].id).attr("class").split(" ")[0],$("#"+e.data[0].id+"."+o).removeClass().addClass(o+" "+e.data[0].category),$("#video_notify_edit").pgNotification({style:"bar",message:"<strong>Success:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"success",showClose:!1}).show()):$("#video_notify_edit").pgNotification({style:"bar",message:"<strong>Error:</strong> "+e.status_msg,position:"top",timeout:2e3,type:"danger",showClose:!1}).show()},error:function(e,t,o){0===e.status?debug&&console.log("Ajax => Not connect, Verify Network"):404==e.status?debug&&console.log("Ajax => Requested page not found [404] | "+e.responseText):500==e.status?debug&&console.log("Ajax => Internal Server Error [500] | "+e.responseText):"parsererror"===t?debug&&console.log("Ajax => Requested JSON parse failed"):"timeout"===t?debug&&console.log("Ajax => Time out error | "+t+": "+o):"abort"===t?debug&&console.log("Ajax => Ajax request aborted"):debug&&console.log("Ajax => Unexpected Error | "+e.responseText)},complete:function(){}})})}),$(function(){"use strict";$("#card-help").card(),$("#card-basic").card(),$("#card-result").card()}),$(function(){"use strict";$("#searchAresIc").submit(function(e){e.preventDefault(),debug&&console.log("----------- fn #searchAresIc submit -----------");var t=$(this),o=$('input[name="ares_ico"]'),a=$.trim(o.val()),r=(new Date).getTime();$(".has-error-text").remove(),o.parent().removeClass("has-error"),a.length&&$.isNumeric(a)?$.ajax({url:"/plugins/intranet2/admin/ajax/searchares_ic.php",type:t.attr("method"),dataType:"json",data:{ares_ico:a},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ARES</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){var o,t=JSON.stringify(e),a=JSON.parse(t);"upload_success"==e.status?(o="",o+="<p><strong>"+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></span></p><p>Vyhledávací řetězec => <span>ico="+a.search_string.ares_ico+"</span></p><hr>",o+='<table class="table">',o+="<thead><tr><th>IČ</th><th>Název subjektu</th><th>Sídlo</th></tr></thead>",o+="<tbody>",$.each(e,function(e,t){"data"===e&&$.each(t,function(e,t){o+="<tr><td>"+t.ico+"</td><td>"+t.ojm+"</td><td>"+t.jmn+"</td></tr>"})}),o+="</tbody></table>",setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):(o="",o+='<p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong>'+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></span></p><p>Vyhledávací řetězec => <span>ares_obec="+a.search_string.ares_obec+" | ares_ulice="+a.search_string.ares_ulice+" | ares_corientacni="+a.search_string.ares_corientacni+" | ares_cpopisne="+a.search_string.ares_cpopisne+"</span></p><hr><p>"+e.status_info+" => ",$.each(e.data,function(e,t){$.each(t,function(e,t){o+="<span>"+t+"</span> "})}),o+="</p>",setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3)),$("#outputaresdata").html("").prepend(o),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var s=msToTime(Math.floor((new Date).getTime()-r));$("#ajaxTime").html(s),debug&&console.log("Ajax => Error Time: "+s)},error:function(e,t,o){$("#outputaresdata").html("").prepend('<div class="col-12"><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputaresdata .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-r));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}}):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte IČ ve správném formátu. Zadejte jen čísla 0-9"},{type:"danger",delay:5e3})},1e3),o.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:""},text:"Vyplňte označenou položku"}).appendTo(o.parent()),debug&&console.log("#searchAresIc submit fn | Error E01"))}),$("#searchAresOther").submit(function(e){e.preventDefault(),debug&&console.log("----------- fn #searchAresOther submit -----------");var t=$(this),o=$("#ares_maxcount").val(),a=$("#ares_sort").val(),s=$("#ares_word").val(),n=$('select[name="ares_obec"]'),r=$.trim(n.val()),i=$('select[name="ares_ulice"]'),l=$.trim(i.val()),d=$('input[name="ares_corientacni"]'),c=$.trim(d.val()),u=$('input[name="ares_cpopisne"]'),p=$.trim(u.val()),g=$("input[name=recordDb]:checked").val(),m=(new Date).getTime();$(".has-error-text").remove(),n.parent().removeClass("has-error"),i.parent().removeClass("has-error"),r.length&&$.isNumeric(r)?$.ajax({url:"/plugins/intranet2/admin/ajax/searchares_other.php",type:t.attr("method"),dataType:"json",data:{ares_maxcount:o,ares_sort:a,ares_word:s,ares_obec:r,ares_ulice:l,ares_corientacni:c,ares_cpopisne:p,ares_record:g},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">ARES</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){var o,t=JSON.stringify(e),a=JSON.parse(t);"upload_success"==e.status?(o="",o+="<p><strong>"+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime"></span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></span></p><p>Vyhledávací řetězec => <span>ares_obec="+a.search_string.ares_obec+" | ares_ulice="+a.search_string.ares_ulice+" | ares_corientacni="+a.search_string.ares_corientacni+" | ares_cpopisne="+a.search_string.ares_cpopisne+"</span></p><hr>",o+='<table class="table">',o+="<thead><tr><th>IČ</th><th>Název subjektu</th><th>Sídlo</th></tr></thead>",o+="<tbody>",$.each(e,function(e,t){"data"===e&&$.each(t,function(e,t){o+='<tr><td><a href="https://www.bluesat.cz/admin/index.php?p=intranet2&sp=house&ssp=newhouse&ico='+t.ico+'" class="createhouse bold" target="windowNewHouse">'+t.ico+"</a></td><td>"+t.ojm+"</td><td>"+t.jmn+"</td></tr>"})}),o+="</tbody></table>",setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):(o="",o+='<p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong>'+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime">'+s+'</span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></span></p><p>Vyhledávací řetězec => <span>ares_obec="+a.search_string.ares_obec+" | ares_ulice="+a.search_string.ares_ulice+" | ares_corientacni="+a.search_string.ares_corientacni+" | ares_cpopisne="+a.search_string.ares_cpopisne+"</span></p><hr><p>"+e.status_info+" => ",$.each(e.data,function(e,t){$.each(t,function(e,t){o+="<span>"+t+"</span> "})}),o+="</p>",setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3)),$("#outputaresdata").html("").prepend(o),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var s=msToTime(Math.floor((new Date).getTime()-m));$("#ajaxTime").html(s),debug&&console.log("Ajax => Error Time: "+s),$(".createhouse")[0]&&$(".createhouse").on("click",function(){$(this).css({"text-decoration":"line-through","font-weight":"400",color:"gray"})})},error:function(e,t,o){$("#outputaresdata").html("").prepend('<div class="col-12"><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputaresdata .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-m));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}}):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte obec ve správném formátu. Zadejte jen čísla 0-9"},{type:"danger",delay:5e3})},1e3),n.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:""},text:"Vyplňte označenou položku"}).appendTo(n.parent()),debug&&console.log("#searchAresOther submit fn | Error E01"))})}),$(function(){"use strict";$("#searchJusticeOther").submit(function(e){e.preventDefault(),console.log("----------- fn #searchJusticeOther submit -----------");var t=$(this),o=$("#justice_maxcount").val(),a=$('input[name="justice_subject"]'),s=$.trim(a.val()),n=$('select[name="justice_obec"]'),r=$.trim(n.val()),i=$('select[name="justice_ulice"]'),l=$.trim(i.val()),d=$('input[name="justice_corientacni"]'),c=$.trim(d.val()),u=$('input[name="justice_cpopisne"]'),p=$.trim(u.val()),g=$("input[name=recordDb]:checked").val(),m=(new Date).getTime();$(".has-error-text").remove(),a.parent().removeClass("has-error"),s.length&&3<=s.length?$.ajax({url:"/plugins/intranet2/admin/ajax/searchjustice_other.php",type:t.attr("method"),dataType:"json",data:{justice_maxcount:o,justice_filtr:"PLATNE",justice_stype:"CONTAINS",justice_subject:s,justice_obec:r,justice_ulice:l,justice_corientacni:c,justice_cpopisne:p,justice_record:g},cache:!1,timeout:2e4,beforeSend:function(){$("#loadingdata").html('<div style="display:block;position:fixed;top:50%;left:50%;transform:translate(-35%, -50%);-ms-transform:translate(-35%, -50%);"><div class="progress-circle-indeterminate"></div><div class="m-t-20 text-center"><span style="float: left;width: 100%;margin-bottom: 10px;font-weight: bold;font-size: 2em;">JUSTICE</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání ... Prosím počkejte ...</span><span style="float: left;width: 100%;margin-bottom: 10px;">Načítání dat může trvat i několik sekund / minut</span><span id="timer" style="float: left;width: 100%;margin-bottom: 10px;color: #C10000;"></span></div></div>').show(),$("#timer").timer()},success:function(e){var o,t=JSON.stringify(e);JSON.parse(t);"upload_success"==e.status?(o="",o+="<p><strong>"+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime">'+a+'</span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></span></p><hr>",o+='<table class="table">',o+="<thead><tr><th>IČ</th><th>Název subjektu</th><th>Sídlo</th></tr></thead>",o+="<tbody>",$.each(e,function(e,t){"data"===e&&$.each(t,function(e,t){o+='<tr><td><a href="https://www.bluesat.cz/admin/index.php?p=intranet2&sp=house&ssp=newhouse&ico='+t.ico+'" class="createhouse bold" target="windowNewHouse">'+t.ico+"</a></td><td>"+t.ojm+"</td><td>"+t.jmn+"</td></tr>"})}),o+="</tbody></table>",setTimeout(function(){$.notify({message:"<strong>Success:</strong> "+e.status_msg},{type:"success",delay:2e3})},1e3)):(o="",o+='<p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong>'+e.status_msg+'</strong></p><p>Doba zpracování požadavku: <span id="ajaxTime">'+a+'</span><span class="float-right">Počet nalezených záznamů: <strong>'+e.count_data+"</strong></p><hr><p>"+e.status_info+"</p>",setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+e.status_msg},{type:"danger",delay:2e3})},1e3)),$("#outputjusticedata").html("").prepend(o),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var a=msToTime(Math.floor((new Date).getTime()-m));$("#ajaxTime").html(a),debug&&console.log("Ajax => Error Time: "+a),$(".createhouse")[0]&&$(".createhouse").on("click",function(){$(this).css({"text-decoration":"line-through","font-weight":"400",color:"gray"})})},error:function(e,t,o){$("#outputjusticedata").html("").prepend('<div class="col-12"><div class="row"><div class="col-sm-12"><p style="color: #C10000;"><i class="fa fa-exclamation"></i> <strong class="errorlog"></strong></p></div></div></div>').show();var a="",s=$("#outputjusticedata .errorlog");a=0===e.status?"Ajax => Not connect, Verify Network":404==e.status?"Ajax => Requested page not found [404] | "+e.responseText:500==e.status?"Ajax => Internal Server Error [500] | "+e.responseText:"parsererror"===t?"Ajax => Requested JSON parse failed":"timeout"===t?"Ajax => Time out error | "+t+": "+o:"abort"===t?"Ajax => Ajax request aborted":"Ajax => Unexpected Error | "+e.responseText,s.html(a),debug&&console.log(a),setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> "+a},{type:"danger",delay:5e3})},1e3),$("#loadingdata").hide().html(""),$("#timer").timer("remove");var n=msToTime(Math.floor((new Date).getTime()-m));debug&&console.log("Ajax => Error Time: "+n)},complete:function(){}}):(setTimeout(function(){$.notify({icon:"fa fa-exclamation",message:"<strong>Error:</strong> Zadejte název subjektu."},{type:"danger",delay:5e3})},1e3),a.parent().addClass("has-error"),$("<div/>",{class:"has-error-text",css:{fontWeight:"normal",color:"#C10000",position:""},text:"Vyplňte označenou položku"}).appendTo(a.parents(":eq(1)")),console.log("#searchJusticeOther submit fn | Error E01"))})}),$(function(){"use strict";"intranet2"==page&&"house"==page1&&null==page2&&$(".selectpicker2").each(function(){$(this).select2({minimumResultsForSearch:"true"==$(this).attr("data-search-select2")?1:-1,dropdownParent:$(".page-content-wrapper"),dropdownCssClass:"b-success zindex1060",width:"100%"})})}),0<$("#tabledocu").length&&$("#tabledocu").Tabledit({url:"/plugins/intranet2/admin/ajax/int2_table_update_docu.php",inputClass:"form-control",restoreButton:!1,lang:"cz",mutedClass:"text-muted warning",columns:{identifier:[0,"id"],editable:[[2,"description","input"]]},buttons:{edit:{class:"btn btn-sm btn-default",html:'<span class="fa fa-edit"></span>',action:"edit"},delete:{class:"btn btn-sm btn-danger",html:'<span class="fa fa-trash-o"></span>',action:"delete"},save:{class:"btn btn-sm btn-success",html:""},confirm:{class:"btn btn-sm btn-success",html:"Confirm"}},onSuccess:function(e){"update_success"==e.status?setTimeout(function(){$.notify({message:e.status_msg},{type:"success",delay:2e3})},1e3):"delete_success"==e.status?($("#"+e.data[0].id).fadeOut(300,function(){$(this).remove()}),setTimeout(function(){$.notify({message:e.status_msg},{type:"success",delay:2e3})},1e3)):($("#"+e.data[0].id).removeClass(),$("#"+e.data[0].id+" button").prop("disabled",!1),setTimeout(function(){$.notify({message:e.status_msg},{type:"danger",delay:5e3})},1e3))}}),$(function(){$("#textSelect_docu").on("click",function(e){e.preventDefault(),$("#ENVOModalPlugin").modal("show")}),$(".text_sel").click(function(e){e.preventDefault();var t=$(this).text();$('input[name="envo_descdocu"]').val(t),$("#ENVOModalPlugin").modal("hide")})}),$(function(){});